<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Muse","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://yoursite.com/page/4/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="ReedMark">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/page/4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<script type="text/javascript">
$(window).load(function(){
   $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
   prettyPrint();
 })    
</script>
<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hexo</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%BD%91%E7%BB%9C%E5%B1%82/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-%E7%BD%91%E7%BB%9C%E5%B1%82/" class="post-title-link" itemprop="url">计算机网络-网络层</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-02 22:58:22" itemprop="dateCreated datePublished" datetime="2020-04-02T22:58:22+08:00">2020-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-11 21:24:34" itemprop="dateModified" datetime="2020-04-11T21:24:34+08:00">2020-04-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="网络层几个协议的作用" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#网络层几个协议的作用" class="headerlink" title="网络层几个协议的作用"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">网络层几个协议的作用</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>

<div class="tabs" id="tab-"><ul class="nav-tabs"><li class="tab"><a href="#tab--1"><i class="fa fa-codepen"></i><span style="color:red">IP协议作用<span></span></span></a></li><li class="tab"><a href="#tab--2"><i class="fa fa-paper-plane"></i><span style="color:green">ARP协议作用<span></span></span></a></li><li class="tab"><a href="#tab--3"><i class="fa fa-paw"></i><span style="color:blue">RARP协议作用 </span></a></li><li class="tab"><a href="#tab--4"><i class="fa fa-modx"></i><span style="color:gray">ICMP协议作用</span></a></li></ul><div class="tab-content"><div class="tab-pane" id="tab--1"><table>
  <tr>
    <td style="background-color:#F0F0F0;color:red;font-family:Microsoft YaHei">使用IP协议就可以把互连以后的计算机网络看成是一个虚拟互连网络。</td>
  </tr>
</table></div><div class="tab-pane" id="tab--2"><table>
  <tr>
    <td style="background-color:#F0F0F0;color:green;font-family:Microsoft YaHei">把一个机器的IP地址转换成相应的物理地址。
    </td>
  </tr>
</table></div><div class="tab-pane" id="tab--3"><table>
  <tr>
    <td style="background-color:#F0F0F0;color:blue;font-family:Microsoft YaHei">把一个机器的物理地址转换成相应的IP地址。
    </td>
  </tr>
</table></div><div class="tab-pane" id="tab--4"><table>
  <tr>
    <td style="background-color:#F0F0F0;color:black;font-family:Microsoft YaHei">用来使主机或路由器报告差错情况和提供有关异常情况的报告。
    </td>
  </tr>
</table></div></div></div>
<h4 id="IP地址分类" style="margin:20px 0 10;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#IP地址分类" class="headerlink" title="IP地址分类"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">IP地址分类</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>

<ul style="list-style-type:upper-alpha;color:black">
    <li> 网络号字段为1字节(8bit)，最前面1位是0 </li>
    <li> 网络号字段为2字节，最前面2位是10 </li>
    <li> 网络号字段为3字节，最前面3位是110 </li>
    <li> 用于多播，最前面4位是1110 </li>
    <li> 保留地址，最前面4位是1111 </li>
</ul>


<h4 id="IP地址和硬件地址的区别" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#IP地址和硬件地址的区别" class="headerlink" title="IP地址和硬件地址的区别"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">IP地址和硬件地址的区别</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>


<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center"></th>
<th style="text-align:center">IP地址</th>
<th style="text-align:center">硬件地址</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">层次</td>
<td style="text-align:center">网络层及以上</td>
<td style="text-align:center">物理层和数据链路层</td>
</tr>
<tr>
<td style="text-align:center">结构</td>
<td style="text-align:center">统一的IP地址通信方便</td>
<td style="text-align:center">异构网络相互通信要进行复杂地址转换</td>
</tr>
</tbody>
</table>
</div>
<h4 id="关于子网掩码" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#关于子网掩码" class="headerlink" title="关于子网掩码"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">关于子网掩码</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>


<ul>
<li><p><code>255.255.255.0</code>代表的含义？</p>
<ul>
<li><code>C</code>类地址的子网掩码<u>默认值</u>。</li>
<li><code>A</code>类或 <code>B</code>类地址的子网掩码。</li>
</ul>
</li>
<li><p>子网掩码为 <code>255.255.255.248</code>，该网络可以连接多少主机？</p>
<p>   &ensp; &emsp;&nbsp;<code>248 = 128 + 64 + 32 + 16 + 8</code>，剩余 <code>3</code>位，除去全 <code>0</code>和全 <code>1</code>，剩下 <code>2<sup>3</sup>-2</code>即 <code>6</code>个主机可以连接。</p>
</li>
<li><p><code>A</code>类子网掩码 <code>255.255.0.255</code>是有效的，但是不推荐这样使用。</p>
</li>
</ul>
<h4 id="MTU" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#标题" class="headerlink" title="MTU"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">MTU</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>


<ul>
<li>是针对<u>数据链路层</u>的。</li>
<li><code>IP数据报</code>的<strong>总长度</strong>（ 数据 <code>+</code>首部）不能超过这个值。</li>
<li>总长度为 <code>16</code>位，因此有 <code>IP数据报首部的总长度&le;min{MTU, 65535}</code> 。</li>
</ul>
<h4 id="关于分片的一道习题" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#关于分片的一道习题" class="headerlink" title="关于分片的一道习题"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">关于分片的一道习题</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>


<div class="note default">
    <p>
        &ensp; &emsp;&nbsp;一个3200位长的TCP报文传到IP层，加上160位的首部后成为数据报。下面的互联网由两个局域网通过路由器连接起来，但第二个局域网所能传送的最长数据帧中的数据部分只有1200位，因此数据报在路由器必须进行分片。试问第二个局域网向其上层要传送多少比特的数据（这里的“数据”当然指的是局域网看见的数据）？
    </p>
</div>
<img src="https://i.loli.net/2020/04/06/7CoVcyLqT8P3mSf.jpg" alt="分片" style="zoom:50%;">

<div class="note danger">
    <p>
        &ensp; &emsp;&nbsp;重点就是<em>局域网所能传送的最长数据帧中的数据部分</em>这句话所代表的是什么，是IP层还是MAC层？答案是MAC层，因为所有的传输都是由上向下一层一层增加首部最后由MAC层完成的。根据这个倒推上去，得到IP层的数据部分为1040bit。<br>
        &ensp; &emsp;&nbsp;TCP给IP的有3200bit，有<code>3200 = 1040 + 1040 + 1040 + 80</code>，所以要分4片，每片都需要加上160bit的首部。
    </p>
</div>

<p><img src="https://i.loli.net/2020/04/06/uPpcgqdkVD2v8JY.jpg" alt="TCP分层"></p>
<p>&ensp; &emsp;&nbsp;因此，最终结果为 <code>1200 + 1200 + 1200 + 240 = 3840bit</code>。</p>
<h4 id="关于地址分配" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#关于地址分配" class="headerlink" title="关于地址分配"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">关于地址分配</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>


<div class="note default">
    <p>
        有如下的<code>4</code>个<code>/24</code>地址块，试进行最大可能的聚合。
        <pre>212.56.132.0/24  212.56.133.0/24  212.56.134.0/24  212.56.135.0/24</pre>
    </p>
</div>
<div class="note danger">
    <p>
       &ensp; &emsp;&nbsp;首先需要理解<em>地址聚合</em>的概念，上面的4个<code>/24</code>地址块相当于4个C类网络，那么路由表中就应该存有4个项目。而如果采用地址聚合，路由表中的项目就可以减少到1个。
        &ensp; &emsp;&nbsp;前面2字节是一样的，第三个字节写出2进制为<code>10000100</code>&emsp;&nbsp;<code>10000101</code>&emsp;&nbsp;<code>10000110</code>&emsp;&nbsp;<code>10000111</code>，只有后2位不同，这样就可以用<code>212.56.132.0/22</code>来表示这4个IP地址了。
    </p>
</div>

<h4 id="路由表结构" style="margin:20px 0 5;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#路由表结构" class="headerlink" title="路由表结构"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">路由表结构</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>


<ul>
<li><p>如果没有下一跳地址代表什么？ </p>
<p>  答：代表路由器和网络是直接连接的</p>
</li>
<li><p>下一跳地址一般代表什么？</p>
<p>  答：路由器的IP</p>
</li>
</ul>
<h4 id="IP分配" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#IP分配" class="headerlink" title="IP分配"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">IP分配</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>


<div class="note default">
    <p>
      &ensp; &emsp;&nbsp;   一个自治系统分配到IP地址块为<code>30.138.118/23</code>,分配给5个局域网，LAN<sub>1</sub>到LAN<sub>5</sub>的主机数量分别为3，91，150，3，15，给出每一个局域网的地址块。
    </p>
</div>
<div class="note danger">
    <p>
        <ul>
            <li><code>/23</code>意味着前23位是网络前缀，后面的9位是可以分配的。</li>
            <li>应该按照主机数量从多到少依次分配。</li>
            <li>首先给局域网3分配，9位一共可以有2<sup>9</sup>共512个可以分配，但是不可能全部给局域网3，应该按照如下方式分配:<img src="https://i.loli.net/2020/04/08/ReV1G8hpIB5Oauk.jpg" alt="IP分配" style="zoom: 67%;margin:0 auto;">
              <br>  其中<code>B：LAN<sub>3</sub></code>，<code>D：LAN<sub>2</sub></code>，<code>F：LAN<sub>5</sub></code>，<code>J：LAN<sub>1</sub></code>，<code>K：LAN<sub>4</sub></code>。
            </li>
    </ul>
    </p>
</div>


<h4 id="路由选择协议" style="margin:20px 0 10;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#路由选择协议" class="headerlink" title="路由选择协议"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">路由选择协议</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>




<section style="margin: 0px;padding: 0px 1em;text-align: center;display: inline-block;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word;" mpa-from-tpl="t">
    <span style="background-color: rgb(0, 122, 170);border-bottom-left-radius: 0.5em;border-bottom-right-radius: 0.5em;border-top-left-radius: 0.5em;border-top-right-radius: 0.5em;box-sizing: border-box;color: rgb(255, 255, 255);display: inline-block;font-size: 14px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0.3em;padding-left: 0.5em;padding-right: 0.5em;padding-top: 0.3em;">
        <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t">
            <span style="box-sizing: border-box;font-size: 16px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;">
                <strong style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t" mpa-is-content="t">RIP</strong>
            </span>
        </section>
    </span>
</section>
<section style="background-color:#fcf1f2;border-bottom-color: rgb(192, 200, 209);border-bottom-style: solid;border-bottom-width: 1px;border-left-color: rgb(192, 200, 209);border-left-style: solid;border-left-width: 1px;border-right-color: rgb(192, 200, 209);border-right-style: solid;border-right-width: 1px;border-top-color: rgb(192, 200, 209);border-top-style: solid;border-top-width: 1px;box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: -1em;max-width: 100%;overflow-wrap: break-word;padding-bottom: 10px;padding-left: 10px;padding-right: 10px;padding-top: 20px;text-align: center;" mpa-from-tpl="t">
    <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t" powered-by="xiumi.us">
        <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t">
            <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;text-align: left;" mpa-from-tpl="t">
             &ensp; &emsp;&nbsp; RIP是分布式的基于距离向量的路由选择协议，最大的优点是简单。<br>
               特点：
                <ul>
                    <li>仅和相邻路由交换信息。</li>
                    <li>路由器交换的信息是当前本路由器所知道的全部信息(路由表)。</li>
                    <li>按固定的时间间隔交换路由信息。</li>
                </ul>
            </section>
        </section>
    </section>
</section><br>




<section style="margin: 0px;padding: 0px 1em;text-align: center;display: inline-block;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word;" mpa-from-tpl="t">
    <span style="background-color: rgb(0, 122, 170);border-bottom-left-radius: 0.5em;border-bottom-right-radius: 0.5em;border-top-left-radius: 0.5em;border-top-right-radius: 0.5em;box-sizing: border-box;color: rgb(255, 255, 255);display: inline-block;font-size: 14px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0.3em;padding-left: 0.5em;padding-right: 0.5em;padding-top: 0.3em;">
        <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t">
            <span style="box-sizing: border-box;font-size: 16px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;">
                <strong style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t" mpa-is-content="t">OSPF</strong>
            </span>
        </section>
    </span>
</section>
<section style="background-color: #fcf1f2;border-bottom-color: rgb(192, 200, 209);border-bottom-style: solid;border-bottom-width: 1px;border-left-color: rgb(192, 200, 209);border-left-style: solid;border-left-width: 1px;border-right-color: rgb(192, 200, 209);border-right-style: solid;border-right-width: 1px;border-top-color: rgb(192, 200, 209);border-top-style: solid;border-top-width: 1px;box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: -1em;max-width: 100%;overflow-wrap: break-word;padding-bottom: 10px;padding-left: 10px;padding-right: 10px;padding-top: 20px;text-align: center;" mpa-from-tpl="t">
    <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t" powered-by="xiumi.us">
        <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t">
            <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;text-align: left;" mpa-from-tpl="t">
             &ensp; &emsp;&nbsp; OSPF最主要的特征就是使用分布式的链路协议状态。<br>
               特点：
                <ul>
                    <li>向本自治系统中的所有路由器发送信息(洪泛法)。</li>
                    <li>发送的信息是与本路由器相邻的所有路由器的链路状态(部分信息)。</li>
                    <li>只有当链路状态发生变化时，路由器才向所有路由器用洪泛法发送此信息。</li>
                </ul>
            </section>
        </section>
    </section>
</section><br>


<section style="margin: 0px;padding: 0px 1em;text-align: center;display: inline-block;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word;" mpa-from-tpl="t">
    <span style="background-color: rgb(0, 122, 170);border-bottom-left-radius: 0.5em;border-bottom-right-radius: 0.5em;border-top-left-radius: 0.5em;border-top-right-radius: 0.5em;box-sizing: border-box;color: rgb(255, 255, 255);display: inline-block;font-size: 14px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0.3em;padding-left: 0.5em;padding-right: 0.5em;padding-top: 0.3em;">
        <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t">
            <span style="box-sizing: border-box;font-size: 16px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;">
                <strong style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t" mpa-is-content="t">BGP</strong>
            </span>
        </section>
    </span>
</section>
<section style="background-color: #fcf1f2;border-bottom-color: rgb(192, 200, 209);border-bottom-style: solid;border-bottom-width: 1px;border-left-color: rgb(192, 200, 209);border-left-style: solid;border-left-width: 1px;border-right-color: rgb(192, 200, 209);border-right-style: solid;border-right-width: 1px;border-top-color: rgb(192, 200, 209);border-top-style: solid;border-top-width: 1px;box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: -1em;max-width: 100%;overflow-wrap: break-word;padding-bottom: 10px;padding-left: 10px;padding-right: 10px;padding-top: 20px;text-align: center;" mpa-from-tpl="t">
    <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t" powered-by="xiumi.us">
        <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;" mpa-from-tpl="t">
            <section style="box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;text-align: left;" mpa-from-tpl="t">
             &ensp; &emsp;&nbsp;BGP采用路径向量路由选择协议。<br>
               特点：
                <ul>
                    <li>BGP在自治系统之间交换<span style="color:red">可达性</span>信息。</li>
                    <li>自治系统之间的路由选择必须考虑有关策略。</li>
                    <li>BGP只是寻找一条能够到达目的网络且比较好的路由，而非最佳。</li>
                </ul>
            </section>
        </section>
    </section>
</section>


<h4 id="IGMP协议" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#IGMP协议" class="headerlink" title="IGMP协议"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">IGMP协议</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4><blockquote style="font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 0px;margin-top: 0px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96); border-bottom: 2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);"><span style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;">IGMP：网际组管理协议。<br>作用：让连接在本地局域网上的多播路由器知道本局域网上是否有主机参加或退出了某个多播组。<br>阶段：<ol style="list-style-type: decimal;margin-block-start: 0em;margin-block-end: 0em;margin-inline-start: 0px;padding-inline-start: 50px;"><li>当某个主机加入新的多播组时，该主机应向多播组的多播地址发送一个IGMP报文，声明自己要成为该组的成员。本地的多播路由器收到IGMP报文后，还要利用多播路由选择协议把这种组成员关系转发给互联网上的其他多播路由器。</li><li>组成员关系是动态的。本地多播路由器要周期性地探询本地局域网上的主机，以便知道这些主机是否还继续是组的成员。</li></ol></span></blockquote><blockquote style="font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 0px;margin-top: 0px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96); border-bottom: 2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);"><span style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;">隧道技术：<br>&ensp; &emsp;&nbsp;适用于多播组的位置在地理上很分散的情况。比如说：网1和网2都支持多播，但是网1和网2之间的路由器不支持，则可以对多播数据报进行再次封装，即加上普通数据报首部，通过“隧道”发送。收到后再去掉首部恢复成原来的多播数据报。</span></blockquote>



<h4 id="VPN和NAT" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#VPN和NAT" class="headerlink" title="VPN和NAT"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">VPN和NAT</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4><blockquote style="font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 0px;margin-top: 0px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96); border-bottom: 2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);"><span style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;">VPN：虚拟专用网络。<br>特点：<br>&ensp; &emsp;&nbsp;采用<strong><em>TCP/IP技术</em></strong>和利用<strong><em>公用的互联网</em></strong>作为通信载体，使一个机构中分布在不同场所的主机能够像使用一个本机构的专用网那样进行通信。<br><table border="1" style="width: auto;margin: 8px 0px 6px 35px;"><tr><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);">优点</td><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);">价格比建造专用网便宜。</td></tr><tr><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);">缺点</td><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);">需要比较复杂的技术</td></tr></table>分类：<ol style="list-style-type: decimal;margin-block-start: 0em;margin-block-end: 0em;margin-inline-start: 0px;padding-inline-start: 50px;"><Li>内联网。</Li><li>外联网</li><li>远程接入VPN</li></ol></span></blockquote><blockquote style="font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 0px;margin-top: 0px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96); border-bottom: 2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);"><span style="font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;">NAT：网络地址转换。<br>NAPT：网络地址与端口号转换，是使用<strong><em>端口号</em></strong>的NAT。<table border="1" style="width: auto;margin: 8px 0px 6px 35px;"><tr><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);">优点</td><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);">可以通过使用NAT路由器使专用网内部的用户和互联网连接。</td></tr><tr><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);">缺点</td><td style="border-right: 2px solid rgb(239, 112, 96);border-bottom:2px solid rgb(239, 112, 96);border-top: 2px solid rgb(239, 112, 96);border-left: 2px solid rgb(239, 112, 96);"><li>通过NAT路由器的通信必须由专用网内的主机发起。</li><li>当NAT路由器只有一个全球IP地址时，专用网内最多只有1个主机可以接入互联网。</li></td></tr></table><i class="fa fa-hand-o-right" aria-hidden="true"></i>NAPT由于还使用了运输层的端口号，因此在NAPT上的一个全球IP地址，可以供专用网中的多个主机使用。</span></blockquote>



<h4 id="Tips" style="margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"><a href="#Tips" class="headerlink" title="Tips"></a>
    <span style="display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;">Tips</span><span style="display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"> </span></h4>

<ul>
<li><code>地址数=末地址-首地址</code>，转换为10进制即可。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/02/Hexo%E9%85%8D%E7%BD%AE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/02/Hexo%E9%85%8D%E7%BD%AE/" class="post-title-link" itemprop="url">Hexo配置</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-02 20:58:22" itemprop="dateCreated datePublished" datetime="2020-04-02T20:58:22+08:00">2020-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-20 11:26:16" itemprop="dateModified" datetime="2020-04-20T11:26:16+08:00">2020-04-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index"><span itemprop="name">Hexo</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="Hexo博客next主题自定义代码块"><a href="#Hexo博客next主题自定义代码块" class="headerlink" title="Hexo博客next主题自定义代码块"></a>Hexo博客next主题自定义代码块</h4><p>找到<code>themes/nex/scripts</code> 文件夹，创建一个 <code>codeblock.js</code> 文件。监听 <code>after_post_render</code> 事件:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">var attributes = [</span><br><span class="line">  'autocomplete="off"',</span><br><span class="line">  'autocorrect="off"',</span><br><span class="line">  'autocapitalize="off"',</span><br><span class="line">  'spellcheck="false"',</span><br><span class="line">  'contenteditable="true"'</span><br><span class="line">]</span><br><span class="line">var attributesStr = attributes.join(' ')</span><br><span class="line"></span><br><span class="line">hexo.extend.filter.register('after_post_render', function (data) &#123;</span><br><span class="line">  while (/&lt;figure class="highlight ([a-zA-Z]+)"&gt;.*?&lt;\/figure&gt;/.test(data.content)) &#123;</span><br><span class="line">    data.content = data.content.replace(/&lt;figure class="highlight ([a-zA-Z]+)"&gt;.*?&lt;\/figure&gt;/, function () &#123;</span><br><span class="line">      var language = RegExp.$1 || 'plain'</span><br><span class="line">      var lastMatch = RegExp.lastMatch</span><br><span class="line">      lastMatch = lastMatch.replace(/&lt;figure class="highlight /, '&lt;figure class="iseeu highlight /')</span><br><span class="line">      return '&lt;div class="highlight-wrap"' + attributesStr + 'data-rel="' + language.toUpperCase() + '"&gt;' + lastMatch + '&lt;/div&gt;'</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-tag">return</span> <span class="selector-tag">data</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></div>
<table>
  <tr>
    <td bgcolor="F0F0F0">
新版本next主题有以下改动：取消原本主题目录下的自定义文件（例如 _custom/custom.styl，但是可以将所有自定义布局或样式放在一个位置特定位置（比如：hexo/source/_data）。 将自定义文件添加到hexo/source/_data中，并取消注释主题配置文件(next/_config.yml)中 custom_file_path 部分下的内容（注意文件名与路径要一致）
    </td>
  </tr>
</table>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">··custom_file_path:</span><br><span class="line">  #head: source/_data/head.swig</span><br><span class="line">  #header: source/_data/header.swig</span><br><span class="line">  #sidebar: source/_data/sidebar.swig</span><br><span class="line">  #postMeta: source/_data/post-meta.swig</span><br><span class="line">  #postBodyEnd: source/_data/post-body-end.swig</span><br><span class="line">  #footer: source/_data/footer.swig</span><br><span class="line">  #bodyEnd: source/_data/body-end.swig</span><br><span class="line">  #variable: source/_data/variables.styl</span><br><span class="line">  #mixin: source/_data/mixins.styl</span><br><span class="line">  style: source/_data/styles.styl</span><br></pre></td></tr></table></figure></div>
<table>
  <tr>
    <td bgcolor="F0F0F0">
在Hexo/source/_data下新建style.styl文件，添加如下代码(&::before中的background是上面方框的颜色)：
    </td>
  </tr>
</table>


<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">10px</span> <span class="number">30px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">35px</span> <span class="number">0</span>;</span><br><span class="line">  ::-webkit-scrollbar &#123;</span><br><span class="line">    <span class="selector-tag">height</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-pseudo">::-webkit-scrollbar-track</span> &#123;</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: white;</span><br><span class="line">    <span class="attribute">content</span>: <span class="built_in">attr</span>(data-rel);</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">38px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#21252b</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">font-family</span>: <span class="string">'Source Sans Pro'</span>, sans-serif;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">  &#125;</span><br><span class="line">  &amp;<span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">    <span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">-webkit-border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fc625d</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">-webkit-box-shadow</span>: <span class="number">20px</span> <span class="number">0px</span> <span class="number">#fdbc40</span>, <span class="number">40px</span> <span class="number">0px</span> <span class="number">#35cd4b</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">20px</span> <span class="number">0px</span> <span class="number">#fdbc40</span>, <span class="number">40px</span> <span class="number">0px</span> <span class="number">#35cd4b</span>;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<table>
  <tr>
    <td bgcolor="F0F0F0">
在themes/next/source/css/_common/scaffolding/highlight找到highlight.styl文件，找到如下代码段：
    </td>
  </tr>
</table>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$code-block &#123;</span><br><span class="line">  background: $highlight-background;</span><br><span class="line">  color: $highlight-foreground;</span><br><span class="line">  line-height: $line-height-code-block;</span><br><span class="line">  <span class="selector-tag">margin</span>: 0 <span class="selector-tag">auto</span> 20<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<table>
  <tr>
    <td bgcolor="F0F0F0">
改为如下代码(如果加上background，上面方框中代码的名称不会显示):
    </td>
  </tr>
</table>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$code-block &#123;</span><br><span class="line">  color: $highlight-foreground;</span><br><span class="line">  line-height: $line-height-code-block;</span><br><span class="line">  //margin: 0 auto 20px;</span><br><span class="line">  <span class="selector-tag">margin</span>: 0 <span class="selector-tag">auto</span> 2<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">border-radius</span>: 5<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">box-shadow</span>: 0 10<span class="selector-tag">px</span> 30<span class="selector-tag">px</span> 0 <span class="selector-tag">rgba</span>(0,0,0,0<span class="selector-class">.4</span>);</span><br><span class="line">  <span class="selector-tag">padding-top</span>: 35<span class="selector-tag">px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<table>
  <tr>
    <td bgcolor="F0F0F0">
highlight.styl中的.code pre字段修改为：
    </td>
  </tr>
</table>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.code</span> <span class="selector-tag">pre</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: $highlight-background;</span><br><span class="line">    <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">600px</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></div>
<table>
  <tr>
    <td bgcolor="F0F0F0">
themes/next/source/css/_common/scaffolding中的tables.styl找到.table-container，改为：
    </td>
  </tr>
</table>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.table-container</span> &#123;</span><br><span class="line">  <span class="attribute">overflow</span>: auto;</span><br><span class="line">  <span class="attribute">background</span>: white;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="行内代码样式修改："><a href="#行内代码样式修改：" class="headerlink" title="行内代码样式修改："></a><strong>行内代码样式修改：</strong></h4><table>
  <tr>
    <td bgcolor="F0F0F0">
在highlight.styl文件，将code段改为如下代码段：
    </td>
  </tr>
</table>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">	<span class="attribute">font-family</span>: monospace;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#202020</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0px</span> <span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">1px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: solid;</span><br><span class="line">    <span class="attribute">border-color</span>: <span class="built_in">rgb</span>(<span class="number">236</span>, <span class="number">239</span>, <span class="number">241</span>);</span><br><span class="line">    <span class="attribute">border-image</span>: initial;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#F0F0F0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">	<span class="attribute">font-size</span>: <span class="number">18px</span>;	</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*另外一种样式*/</span></span><br><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">	<span class="attribute">font-family</span>: monospace;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#6f42c1</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">3px</span> <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-width</span>: <span class="number">0.4px</span>;</span><br><span class="line">    <span class="attribute">border-style</span>: dotted; <span class="comment">/*solid;*/</span></span><br><span class="line">    <span class="attribute">border-image</span>: initial;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#f0f0f0</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="font-awesome使用："><a href="#font-awesome使用：" class="headerlink" title="font-awesome使用："></a><strong>font-awesome使用：</strong></h4><table>
  <tr>
    <td bgcolor="F0F0F0">
  Hexo已经集成了font-awesome图标，可以通过以下方式直接调用：
    </td>
  </tr>
</table>

<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"fa fa-camera-retro"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h4 id="选项卡使用："><a href="#选项卡使用：" class="headerlink" title="选项卡使用："></a><strong>选项卡使用：</strong></h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs tab ,1 %&#125; </span><br><span class="line"><span class="comment">&lt;!-- tab &lt;span style = 'color:red'&gt;选项卡1描述&lt;span/&gt; @codepen--&gt;</span></span><br><span class="line">选项卡1内容</span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- tab &lt;span style = 'color:green'&gt;选项卡2描述&lt;span/&gt;@paper-plane--&gt;</span></span><br><span class="line">选项卡2内容</span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- tab &lt;span style='color:blue'&gt;选项卡3描述 &lt;/span&gt;@paw --&gt;</span></span><br><span class="line">选项卡3内容</span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="段落文字设置背景色"><a href="#段落文字设置背景色" class="headerlink" title="段落文字设置背景色"></a>段落文字设置背景色</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 20px;margin-top: 20px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);"</span>&gt;</span></span><br><span class="line">		输入的文字</span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<p>或</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">style</span>=<span class="string">"font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 10px;margin-top: 10px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96); border-bottom: 2px solid rgb(239, 112, 96);</span></span></span><br><span class="line"><span class="tag"><span class="string">    border-top: 2px solid rgb(239, 112, 96);"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"</span>&gt;</span>内容<span class="tag">&lt;<span class="name">br</span>&gt;</span>列表：<span class="tag">&lt;<span class="name">ol</span> <span class="attr">style</span>=<span class="string">"list-style-type: decimal;margin-block-start: 0em;margin-block-end: 0em;margin-inline-start: 0px;padding-inline-start: 50px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line">注: margin-bottom:底部的间距</span><br><span class="line">    margin-top:顶部的间距</span><br><span class="line">	border-right:右边的边框，同理left、top、bottom为其它三个方向的边框</span><br></pre></td></tr></table></figure></div>
<p>或</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"border-width: 0px;border-style: initial;border-color: currentcolor;box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"padding: 10px;box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"width: 100%;"</span> <span class="attr">data-width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"width: 100%;display: flex;justify-content: flex-end;-webkit-justify-content: flex-end;"</span> <span class="attr">data-width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"width: 15px;height: 15px;border-top: 10px solid #fdc010;border-right: 10px solid #fdc010;overflow: hidden;box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin: -11px 5px;border-width: 1px;border-style: solid;border-color: rgb(253, 192, 16);box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"padding: 14px;box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"text-align: left;"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"width: auto;display: inline-block;"</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"line-height: 30px;text-align: left;"</span>&gt;</span></span><br><span class="line">                  内容</span><br><span class="line">                  <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                      <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"width: 100%;"</span> <span class="attr">data-width</span>=<span class="string">"100%"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"width: 15px;height: 15px;border-bottom: 10px solid #fdc010;border-left: 10px solid #fdc010;overflow: hidden;box-sizing: border-box;"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">br</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h4 id="Html中嵌入列表"><a href="#Html中嵌入列表" class="headerlink" title="Html中嵌入列表"></a>Html中嵌入列表</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span> 内容1 <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">li</span>&gt;</span> 内容2 <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h4 id="选项卡中嵌入段落"><a href="#选项卡中嵌入段落" class="headerlink" title="选项卡中嵌入段落"></a>选项卡中嵌入段落</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs tab ,-1 %&#125; </span><br><span class="line"><span class="comment">&lt;!-- tab &lt;span style = 'color:red'&gt;选项1&lt;span/&gt; @codepen--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei"</span>&gt;</span></span><br><span class="line">		输入的文字</span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tab &lt;span style = 'color:green'&gt;选项2&lt;span/&gt;@paper-plane--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei"</span>&gt;</span></span><br><span class="line">		输入的文字</span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tab &lt;span style='color:blue'&gt;选项3 &lt;/span&gt;@paw --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei"</span>&gt;</span></span><br><span class="line">		输入的文字</span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- tab &lt;span style='color:gray'&gt;选项4&lt;/span&gt;@modx--&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">td</span> <span class="attr">style</span>=<span class="string">"background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei"</span>&gt;</span></span><br><span class="line">		输入的文字</span><br><span class="line">    <span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- endtab --&gt;</span></span><br><span class="line"></span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure></div>
<h4 id="Html列表嵌套"><a href="#Html列表嵌套" class="headerlink" title="Html列表嵌套"></a>Html列表嵌套</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">style</span>=<span class="string">"list-style-type:lower-greek;margin-block-start: 0em;margin-block-end: 0em;margin-inline-start: 0px;padding-inline-start: 50px;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>咖啡<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>茶</span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>红茶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>绿茶</span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>中国茶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>非洲茶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>牛奶<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">注：</span><br><span class="line">lower-alpha：小写英文字母The marker is lower-alpha (a, b, c, d, e)</span><br><span class="line">upper-alpha：大写英文字母The marker is upper-alpha (A, B, C, D, E)</span><br><span class="line">lower-greek：小写希腊字母(alpha, beta, gamma)</span><br><span class="line">upper-roman：大写罗马数字(I, II, III, IV, V)</span><br><span class="line">disc：默认。标记是实心圆。</span><br><span class="line">circle：标记是空心圆。</span><br><span class="line">square：标记是实心方块。</span><br><span class="line">decimal：标记是数字。</span><br><span class="line">decimal-leading-zero：0开头的数字标记。(01, 02, 03)</span><br><span class="line">margin-block-start:上方间距</span><br><span class="line">margin-block-end：下方间距</span><br><span class="line">margin-inline-start：左方间距</span><br><span class="line">padding-inline-start：效果同左方间距</span><br></pre></td></tr></table></figure></div>
<h4 id="几种样式"><a href="#几种样式" class="headerlink" title="几种样式"></a>几种样式</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"margin-top: 30px;margin-bottom: 15px;font-weight: bold;border-bottom: 2px solid rgb(239, 112, 96);font-size: 1em;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: bottom;border-bottom: 35px solid #efebe9;border-right: 20px solid transparent;"</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">data-tool</span>=<span class="string">"mdnice编辑器"</span> <span class="attr">style</span>=<span class="string">"margin-top: 30px;font-weight: bold;font-size: 22px;border-bottom: 2px solid rgb(89, 89, 89);margin-bottom: 30px;color: rgb(89, 89, 89);"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;border-bottom: 2px solid rgb(89, 89, 89);"</span>&gt;</span>内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin: 0px;padding: 0px 1em;text-align: center;display: inline-block;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word;"</span> <span class="attr">mpa-from-tpl</span>=<span class="string">"t"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(0, 122, 170);border-bottom-left-radius: 0.5em;border-bottom-right-radius: 0.5em;border-top-left-radius: 0.5em;border-top-right-radius: 0.5em;box-sizing: border-box;color: rgb(255, 255, 255);display: inline-block;font-size: 14px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0.3em;padding-left: 0.5em;padding-right: 0.5em;padding-top: 0.3em;"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;"</span> <span class="attr">mpa-from-tpl</span>=<span class="string">"t"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;font-size: 16px;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">strong</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;"</span> <span class="attr">mpa-from-tpl</span>=<span class="string">"t"</span> <span class="attr">mpa-is-content</span>=<span class="string">"t"</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"background-color: rgb(239, 239, 239);border-bottom-color: rgb(192, 200, 209);border-bottom-style: solid;border-bottom-width: 1px;border-left-color: rgb(192, 200, 209);border-left-style: solid;border-left-width: 1px;border-right-color: rgb(192, 200, 209);border-right-style: solid;border-right-width: 1px;border-top-color: rgb(192, 200, 209);border-top-style: solid;border-top-width: 1px;box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: -1em;max-width: 100%;overflow-wrap: break-word;padding-bottom: 10px;padding-left: 10px;padding-right: 10px;padding-top: 20px;text-align: center;border-left: 1px solid rgb(0, 122, 170);border-top: 1px solid rgb(0, 122, 170);border-bottom: 1px solid rgb(0, 122, 170);border-right: 1px solid rgb(0, 122, 170);"</span> <span class="attr">mpa-from-tpl</span>=<span class="string">"t"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;"</span> <span class="attr">mpa-from-tpl</span>=<span class="string">"t"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;"</span> <span class="attr">mpa-from-tpl</span>=<span class="string">"t"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"box-sizing: border-box;margin-bottom: 0px;margin-left: 0px;margin-right: 0px;margin-top: 0px;max-width: 100%;overflow-wrap: break-word;padding-bottom: 0px;padding-left: 0px;padding-right: 0px;padding-top: 0px;text-align: left;"</span> <span class="attr">mpa-from-tpl</span>=<span class="string">"t"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin: 0px 8px;padding: 0px;text-align: justify;text-indent: 2em;clear: both;min-height: 1em;max-width: 100%;box-sizing: border-box;overflow-wrap: break-word;"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin: 0px 8px;padding: 0px;text-align: justify;color: rgb(51, 51, 51);text-transform: none;line-height: 1.75em;text-indent: 2em;letter-spacing: normal;font-size: 17px;font-style: normal;font-variant: normal;font-weight: 400;text-decoration: none;word-spacing: 0px;white-space: normal;orphans: 2;-webkit-text-stroke-width: 0px;"</span>&gt;</span>文字内容<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h4</span> <span class="attr">data-tool</span>=<span class="string">"mdnice编辑器"</span> <span class="attr">style</span>=<span class="string">"font-weight: bold;color: black;font-size: 24px;text-align: center;background-image: url(<span class="symbol">&amp;quot;</span>https://mmbiz.qpic.cn/mmbiz_png/qNS2Nu0Tg8IZvDnXPpEa7WfK4eZKFDCh96MAia6bQ3PpKz0OiaMCnzXfLuAqibXMEqibScmMYTUY14fHRfqDN0QMfw/640?wx_fmt=png<span class="symbol">&amp;quot;</span>);background-position: center top;background-repeat: no-repeat;background-size: 75px;line-height: 95px;margin-top: 38px;margin-bottom: 10px;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 20px;color: #48b378;border-bottom: 2px solid #2e7950;"</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;width: 100%;vertical-align: top;letter-spacing: 0px;padding-right: 20px;padding-left: 20px;box-shadow: rgb(0, 0, 0) 0px 0px 0px;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">""</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin-top: 10px;margin-bottom: 10px;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline;"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;width: 100%;vertical-align: top;border-width: 1px;border-style: solid;border-color: transparent;padding: 10px;box-shadow: rgb(170, 170, 170) 0px 0px 10px;background-color: rgba(139, 111, 111, 0.36);"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">""</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin-top: -26px;margin-right: 0%;margin-left: 0%;transform: translate3d(0px, 0px, 0px);text-align: left;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: top;width: auto;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: top;width: auto;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: top;box-shadow: rgb(114, 106, 106) 0.1em 0.1em 0.3em;border-radius: 0px 0px 0.3em 0.3em;background-color: rgb(95, 156, 239);color: rgb(248, 240, 240);font-size: 18px;padding-left: 10px;padding-right: 10px;text-align: center;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 17px;"</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: top;width: auto;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: top;width: auto;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span> <span class="attr">powered-by</span>=<span class="string">"xiumi.us"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: top;width: 0px;opacity: 0.8;border-width: 0.5em 0.25em;border-style: solid;border-color: transparent transparent rgb(95, 156, 239) rgb(95, 156, 239);line-height: 0;"</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"line-height: 0;width: 0px;"</span>&gt;</span><span class="tag">&lt;<span class="name">svg</span> <span class="attr">viewBox</span>=<span class="string">"0 0 1 1"</span> <span class="attr">style</span>=<span class="string">"vertical-align:top;"</span>&gt;</span><span class="tag">&lt;/<span class="name">svg</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 16px;color: rgb(0, 0, 0);"</span>&gt;</span><span class="symbol">&amp;ensp;</span> <span class="symbol">&amp;emsp;</span><span class="symbol">&amp;nbsp;</span>内容<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 16px;color: rgb(0, 0, 0);"</span>&gt;</span>列表<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin-left: 8px;margin-right: 8px;line-height: 2em;"</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 15px;color: rgb(255, 255, 255);"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;<span class="name">section</span> <span class="attr">style</span>=<span class="string">"margin-left: 8px;margin-right: 8px;line-height: 2em;"</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">//标题加上文本框 标题最好能够单独放在一个HTML块中，否则可能会有问题</span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span> <span class="attr">id</span>=<span class="string">"标题"</span> <span class="attr">style</span>=<span class="string">"margin:20px 0 0"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#标题"</span> <span class="attr">class</span>=<span class="string">"headerlink"</span> <span class="attr">title</span>=<span class="string">"标题"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;"</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br><span class="line">//重新用一个HTML块填充以下代码，可以重复叠加，样式类似多行单列的表格</span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">style</span>=<span class="string">"font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 0px;margin-top: 0px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96); border-bottom: 2px solid rgb(239, 112, 96);</span></span></span><br><span class="line"><span class="tag"><span class="string">    border-top: 2px solid rgb(239, 112, 96);"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"</span>&gt;</span>内容<span class="tag">&lt;<span class="name">br</span>&gt;</span>列表：<span class="tag">&lt;<span class="name">ol</span> <span class="attr">style</span>=<span class="string">"list-style-type: decimal;margin-block-start: 0em;margin-block-end: 0em;margin-inline-start: 0px;padding-inline-start: 50px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//非标题加文本框</span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"margin-top: 20px;margin-bottom: 0px;font-weight: bold;border-bottom: 2px solid rgb(239, 112, 96);font-size: 1em;"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: none;"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;"</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span>  <span class="attr">style</span>=<span class="string">"font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 0px;margin-top: 0px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96);"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"</span>&gt;</span>内容<span class="tag">&lt;<span class="name">br</span>&gt;</span>列表：<span class="tag">&lt;<span class="name">ol</span> <span class="attr">style</span>=<span class="string">"list-style-type: decimal;margin-block-start: 0em;margin-block-end: 0em;margin-inline-start: 0px;padding-inline-start: 50px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"margin-top: 0px;margin-bottom: 0px;font-weight: bold;border-bottom: 2px solid rgb(239, 112, 96);font-size: 1em;"</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">//纯文本框，上下留有边距</span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">style</span>=<span class="string">"font-size: 0.9em;overflow: auto;color: rgb(106, 115, 125);padding: 10px 10px 10px 20px;margin-bottom: 10px;margin-top: 10px;border-left-color: rgb(239, 112, 96);background: rgb(255, 249, 249);border-right: 2px solid rgb(239, 112, 96); border-bottom: 2px solid rgb(239, 112, 96);</span></span></span><br><span class="line"><span class="tag"><span class="string">    border-top: 2px solid rgb(239, 112, 96);"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"font-size: 16px;padding-top: 8px;padding-bottom: 8px;color: black;line-height: 26px;"</span>&gt;</span>内容<span class="tag">&lt;<span class="name">br</span>&gt;</span>列表：<span class="tag">&lt;<span class="name">ol</span> <span class="attr">style</span>=<span class="string">"list-style-type: decimal;margin-block-start: 0em;margin-block-end: 0em;margin-inline-start: 0px;padding-inline-start: 50px;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>项目2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ol</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//纯标题</span><br><span class="line"><span class="tag">&lt;<span class="name">h4</span> <span class="attr">id</span>=<span class="string">"标题"</span> <span class="attr">style</span>=<span class="string">"margin:20px 0 0;border-bottom: 2px solid rgb(239, 112, 96);"</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#标题"</span> <span class="attr">class</span>=<span class="string">"headerlink"</span> <span class="attr">title</span>=<span class="string">"标题"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;background: rgb(239, 112, 96);color: rgb(255, 255, 255);padding: 3px 10px 1px;border-top-right-radius: 3px;border-top-left-radius: 3px;margin-right: 3px;"</span>&gt;</span>标题<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"display: inline-block;vertical-align: bottom;border-bottom: 36px solid #efebe9;border-right: 20px solid transparent;"</span>&gt;</span> <span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">h4</span>&gt;</span></span><br></pre></td></tr></table></figure></div>
<h4 id="hexo-math的bug"><a href="#hexo-math的bug" class="headerlink" title="hexo-math的bug"></a>hexo-math的bug</h4><p><code>hexo-inject</code>已经不再维护，如果报错需要删除这个依赖包</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-inject --save</span><br></pre></td></tr></table></figure></div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/02/leetcode28-%E5%AE%9E%E7%8E%B0strStr()/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/02/leetcode28-%E5%AE%9E%E7%8E%B0strStr()/" class="post-title-link" itemprop="url">leetcode28-实现strStr()</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-02 15:58:22" itemprop="dateCreated datePublished" datetime="2020-04-02T15:58:22+08:00">2020-04-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-05 15:01:29" itemprop="dateModified" datetime="2020-04-05T15:01:29+08:00">2020-04-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Leetcode%E9%A2%98%E8%A7%A3/" itemprop="url" rel="index"><span itemprop="name">Leetcode题解</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>实现strStr()函数。</strong></p>
<table>
  <tr>
    <td bgcolor="F0F0F0">
&ensp; &emsp;&nbsp;要求：给定一个 haystack 字符串和一个 needle 字符串，在 haystack 字符串中找出 needle 字符串出现的第一个位置 (从0开始)。如果不存在，则返回-1。
    </td>
  </tr>
</table>

<p><strong>示例 1:</strong></p>
<table>
  <tr>
    <td bgcolor="F0F0F0">
输入: &ensp; &emsp;&nbsp;haystack = "hello", needle = "ll"<br>
输出: &ensp; &emsp;&nbsp;2
    </td>
  </tr>
</table>

<p><strong>实例 2</strong></p>
<table>
  <tr>
    <td style="background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei" ">
输入: &ensp; &emsp;&nbsp;haystack = "aaaaa", needle = "bba"<br>
输出: &ensp; &emsp;&nbsp;-1
    </td>
  </tr>
</table>

<p><div class="note default">
  <p>标准算法是KMP，一开始自然想不到。最容易想到的就是先对haystack进行遍历，找到与needle第1个元素相同的字符，并记录其下标i，然后从i往后遍历，判断是否完全匹配。</p>
</div><br><div class="tabs" id="unique-name"><ul class="nav-tabs"><li class="tab active"><a href="#unique-name-1"><i class="fa fa-paw"></i>Java暴力法</a></li><li class="tab"><a href="#unique-name-2"><i class="fa fa-codepen"></i>Java双指针</a></li></ul><div class="tab-content"><div class="tab-pane active" id="unique-name-1"><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">strStr</span><span class="params">(String haystack, String needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(needle.length() == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//判断是否匹配的标志位，初始化为false</span></span><br><span class="line">        <span class="keyword">boolean</span> resultFlag = <span class="keyword">false</span>;</span><br><span class="line">        <span class="comment">//转换成字符数组</span></span><br><span class="line">        <span class="keyword">char</span>[] haystackArray = haystack.toCharArray();</span><br><span class="line">        <span class="keyword">char</span>[] needleArray = needle.toCharArray();</span><br><span class="line">        <span class="comment">//开始遍历haystack</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; haystackArray.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(haystackArray[i] == needleArray[<span class="number">0</span>]) &#123;</span><br><span class="line">                <span class="comment">//判断从i往后的元素是否完全匹配</span></span><br><span class="line">                resultFlag = Match(i, haystackArray, needleArray);</span><br><span class="line">                <span class="comment">//匹配则直接返回下标</span></span><br><span class="line">                <span class="keyword">if</span>(resultFlag) &#123;</span><br><span class="line">                    <span class="keyword">return</span> i;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">Match</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">char</span>[] haystackArray, <span class="keyword">char</span>[] needleArray)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//首先要判断haystack从i到结束的长度是否大于等于needle的长度</span></span><br><span class="line">        <span class="comment">//若haystack为“littleboy”，长度为9，needle为“boy”，则i应该为6</span></span><br><span class="line">        <span class="comment">//所以haystack从i到结束的长度就为总长度-i</span></span><br><span class="line">        <span class="keyword">if</span>(haystackArray.length - i &lt; needleArray.length) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//haystack和needle的下标是不同的，一个从i开始，一个从0开始</span></span><br><span class="line">        <span class="comment">//j为needle下标</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; needleArray.length &amp;&amp; i &lt; haystackArray.length; j++, i++) &#123;</span><br><span class="line">            <span class="comment">//一旦不相等则返回false</span></span><br><span class="line">            <span class="keyword">if</span>(haystackArray[i] != needleArray[j]) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tab-pane" id="unique-name-2"><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="JAVA"><figure class="iseeu highlight /java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">strStr</span><span class="params">(String haystack, String needle)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> haystackLength = haystack.length();</span><br><span class="line">        <span class="keyword">int</span> needleLength = needle.length();</span><br><span class="line">        <span class="keyword">if</span>(needleLength == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//指向haystack的首部</span></span><br><span class="line">        <span class="keyword">int</span> ptrToHaystack = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//比如haystack:"abceabcd",needle:"abcd"</span></span><br><span class="line">        <span class="comment">//ptrToHaystck最后只要判断到第4位的a</span></span><br><span class="line">        <span class="comment">//再往后长度已经小于needle了，不可能匹配</span></span><br><span class="line">        <span class="comment">//所以条件是小于haystackLength(8) - needleLength(4) + 1 = 5</span></span><br><span class="line">        <span class="keyword">while</span>(ptrToHaystack &lt; haystackLength - needleLength + <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">while</span>(ptrToHaystack &lt; haystackLength - needleLength + <span class="number">1</span> &amp;&amp; </span><br><span class="line">            haystack.charAt(ptrToHaystack) != needle.charAt(<span class="number">0</span>))&#123;</span><br><span class="line">                ptrToHaystack++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//记录匹配的长度</span></span><br><span class="line">            <span class="keyword">int</span> currMatchLength = <span class="number">0</span>;</span><br><span class="line">            <span class="comment">//指向needle的首部</span></span><br><span class="line">            <span class="keyword">int</span> ptrToNeedle = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(ptrToHaystack &lt; haystackLength &amp;&amp; ptrToNeedle &lt; needleLength &amp;&amp;</span><br><span class="line">                  haystack.charAt(ptrToHaystack) == needle.charAt(ptrToNeedle))&#123;</span><br><span class="line">                      ptrToNeedle++;</span><br><span class="line">                      ptrToHaystack++;</span><br><span class="line">                      currMatchLength++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(currMatchLength == needleLength)&#123;</span><br><span class="line">                <span class="keyword">return</span> ptrToHaystack - needleLength;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//否则回溯</span></span><br><span class="line">            <span class="comment">//依然是上面的那个例子haystack:"abceabcd",needle:"abcd"</span></span><br><span class="line">            <span class="comment">//前三位都是匹配的，当指向第4个元素时，发现不匹配，此时curMatchLength</span></span><br><span class="line">            <span class="comment">//已经是3了，此时应该从距离不匹配元素较近的下一个元素即“b”开始</span></span><br><span class="line">            <span class="comment">//就是ptrToHaystack(3) - currMatchLength(3) + 1 = 1位置</span></span><br><span class="line">            ptrToHaystack = ptrToHaystack - currMatchLength + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></div></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/01/ucos-II%E5%AE%9E%E7%8E%B0%E5%93%B2%E5%AD%A6%E5%AE%B6%E5%B0%B1%E9%A4%90%E9%97%AE%E9%A2%98/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/01/ucos-II%E5%AE%9E%E7%8E%B0%E5%93%B2%E5%AD%A6%E5%AE%B6%E5%B0%B1%E9%A4%90%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">ucos-II实现哲学家就餐问题</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-01 19:58:22" itemprop="dateCreated datePublished" datetime="2020-04-01T19:58:22+08:00">2020-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-05-26 17:03:03" itemprop="dateModified" datetime="2020-05-26T17:03:03+08:00">2020-05-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">嵌入式实时操作系统</span></a>
                </span>
                  >
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E4%B9%A0%E9%A2%98/" itemprop="url" rel="index"><span itemprop="name">习题</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h6 id="哲学家就餐问题"><a href="#哲学家就餐问题" class="headerlink" title="哲学家就餐问题"></a>哲学家就餐问题</h6><p>&ensp; &emsp;&nbsp;有5个哲学家，其生活方式是交替的进行思考和进餐。他们共用一张圆桌，分别坐在周围的5张椅子上，在圆桌上有五个碗和五支筷子，平时哲学家进行思考，饥饿时便试图取其左、右靠近他的筷子，只有在他拿到两支筷子时才能进餐。进餐毕，放下筷子继续思考，要求如下：</p>
<ul>
<li>键盘上的按键0到1分别代表5个哲学家申请吃饭。</li>
<li>要求列出所有可能出现的状况，而且屏幕上必须将最新的状态显示出来。注：申请进餐未果维持5s后改为显示正在思考。</li>
<li>每位哲学家的进餐时间为1分钟（需要显示倒计时），进餐次数不做限定。</li>
<li>分别用全局变量（不用事件和信号量集标志组）、事件、信号量集标志组实现。</li>
</ul>
<div class="tabs" id="tab-"><ul class="nav-tabs"><li class="tab active"><a href="#tab--1"><i class="fa fa-codepen"></i><span style="color:red">全局变量实现<span></span></span></a></li><li class="tab"><a href="#tab--2"><i class="fa fa-paper-plane"></i><span style="color:green">事件实现<span></span></span></a></li><li class="tab"><a href="#tab--3"><i class="fa fa-paw"></i><span style="color:blue">信号量集标志组实现 </span></a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab--1"><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"INCLUDES.H"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TASK_SIZE_STK 512</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TIME 40</span></span><br><span class="line">OS_STK StartTaskStk[TASK_SIZE_STK];</span><br><span class="line">OS_STK PhiTaskStk[<span class="number">5</span>][TASK_SIZE_STK];</span><br><span class="line">OS_STK KeyTaskStk[TASK_SIZE_STK];</span><br><span class="line">INT8U x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">INT16S Key;</span><br><span class="line">BOOLEAN KeyFlag;</span><br><span class="line"><span class="comment">//每个哲学家单独申请后Stick的状态:</span></span><br><span class="line"><span class="comment">//01234, 01234, 01234, 01234, 01234  对应的位</span></span><br><span class="line"><span class="comment">//11000, 01100, 00110, 00011, 10001  每位的状态</span></span><br><span class="line"><span class="comment">//  1  ,   2  ,   3  ,   4  ,   5    哲学家编号</span></span><br><span class="line">INT8U PhiID[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;   <span class="comment">//哲学家编号</span></span><br><span class="line">INT8U Stick[] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;;   <span class="comment">//全局变量,1代表筷子未被占用</span></span><br><span class="line">INT16S KeyArray[] = &#123;<span class="number">0x1B</span>, <span class="number">0x31</span>, <span class="number">0x32</span>, <span class="number">0x33</span>, <span class="number">0x34</span>, <span class="number">0x35</span>&#125;;</span><br><span class="line"><span class="comment">//对应Esc,1,2,3,4,5按键</span></span><br><span class="line">INT8U i;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Eat</span><span class="params">(INT8U x)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Think</span><span class="params">(INT8U x)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fail</span><span class="params">(INT8U x)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reply</span><span class="params">(INT8U x)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    OSInit();</span><br><span class="line">    PC_DOSSaveReturn();</span><br><span class="line">    PC_VectSet(uCOS, OSCtxSw);</span><br><span class="line">    OSTaskCreate(StartTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;StartTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">0</span>);</span><br><span class="line">    OSTaskCreate(KeyTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;KeyTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">    OSStart();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    INT8U err;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> OS_CRITICAL_METHOD == 3</span></span><br><span class="line">    OS_CPU_SR cpu_sr</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    pdata = pdata;</span><br><span class="line">    OS_ENTER_CRITICAL();</span><br><span class="line">    PC_VectSet(<span class="number">0x08</span>, OSTickISR);</span><br><span class="line">    PC_SetTickRate(OS_TICKS_PER_SEC);</span><br><span class="line">    OS_EXIT_CRITICAL();</span><br><span class="line">    OSStatInit();</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//五个任务的任务名字可以相同,给予不同的优先级,并传入哲学家编号</span></span><br><span class="line">        <span class="comment">//取PhiID[i]的地址,并转换成void类型的指针,避免类型转换</span></span><br><span class="line">        <span class="comment">//(void可以是任意类型)</span></span><br><span class="line">        err = OSTaskCreate(PhiTask, (<span class="keyword">void</span> *)&amp;PhiID[i],</span><br><span class="line">                           &amp;PhiTaskStk[i][TASK_SIZE_STK - <span class="number">1</span>], i + <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(err == OS_NO_ERR)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Task %d create successfully"</span>, i);</span><br><span class="line">            PC_DispStr(<span class="number">2</span>, <span class="number">20</span> + i, temp,</span><br><span class="line">                       DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//创建完成后挂起自己</span></span><br><span class="line">    OSTaskSuspend(OS_PRIO_SELF);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        KeyFlag = PC_GetKey(&amp;Key);</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            PC_DOSReturn();</span><br><span class="line">        &#125;</span><br><span class="line">        OSTimeDly(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//这里只能用局部变量，即为5个任务单独分配空间</span></span><br><span class="line">    INT8U ID;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    INT8U j;</span><br><span class="line">    INT32U time = <span class="number">0</span>;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    <span class="comment">//由于void *可以代表指向任意类型的指针,所以先将其转换成INT8U类型的</span></span><br><span class="line">    <span class="comment">//指针,再取其内容,得到哲学家的编号</span></span><br><span class="line">    ID = *(INT8U *)pdata;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//读取到相应的按键</span></span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[ID])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//要在5s内申请全局变量, 可以用</span></span><br><span class="line">            <span class="comment">//一个for语句循环5次,每次都延时1s</span></span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//在5s内如果对应的全局变量满足两个1的条件,</span></span><br><span class="line">                <span class="comment">//则马上跳转到Eat函数,同时应该置j为6以退出</span></span><br><span class="line">                <span class="comment">//循环,否则会有一定的延时</span></span><br><span class="line">                <span class="keyword">if</span>(Stick[ID - <span class="number">1</span>] == <span class="number">1</span> &amp;&amp; Stick[ID % <span class="number">5</span>] == <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//这几句的顺序不能变，否则直接跳</span></span><br><span class="line">                    <span class="comment">//转到Eat函数，其余两句不会执行</span></span><br><span class="line">                    Stick[ID - <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">                    Stick[ID % <span class="number">5</span>] = <span class="number">0</span>;</span><br><span class="line">                    j = <span class="number">6</span>;</span><br><span class="line">                    Eat(ID);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(j &lt; <span class="number">4</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//显示申请</span></span><br><span class="line">                    Reply(ID);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span>(j == <span class="number">4</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//已经5s还不满足条件</span></span><br><span class="line">                    Fail(ID);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Think(ID);</span><br><span class="line">                &#125;</span><br><span class="line">                OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Think(ID);</span><br><span class="line">            <span class="comment">//下面的OSTimeDly不可缺少,否则任务不会</span></span><br><span class="line">            <span class="comment">//进行调度, 也就无法执行按键读取的任务</span></span><br><span class="line">            <span class="comment">//时间尽量短,以更快响应按键读取</span></span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Eat</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    INT8U j;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is eating                   "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">    <span class="comment">//以下显示倒计时,也需要用for循环实现</span></span><br><span class="line">    <span class="comment">//如果倒计时没有结束,需要每次延时1s</span></span><br><span class="line">    <span class="comment">//如果结束,则马上将全局变量恢复为1</span></span><br><span class="line">    <span class="keyword">for</span>(j = TIME; j &lt; <span class="number">60</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j &lt; <span class="number">60</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//倒计时从60 - TIME开始</span></span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"countdown: %d s "</span>, <span class="number">60</span> - j);</span><br><span class="line">            PC_DispStr(<span class="number">24</span>, ID, temp, DISP_BGND_BLACK + DISP_FGND_GREEN);</span><br><span class="line">            OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">59</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Stick[ID - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">            Stick[ID % <span class="number">5</span>] = <span class="number">1</span>;</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Think</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is thinking                   "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fail</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d apply for meal failed "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp, DISP_BGND_BLACK + DISP_FGND_RED);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reply</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is replying for meal  "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp, DISP_BGND_BLACK + DISP_FGND_RED);</span><br><span class="line">    <span class="comment">//申请的过程中如果也满足了条件,则同样跳转至Eat函数</span></span><br><span class="line">    <span class="keyword">if</span>(Stick[ID - <span class="number">1</span>] == <span class="number">1</span> &amp;&amp; Stick[ID % <span class="number">5</span>] == <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Stick[ID - <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">        Stick[ID % <span class="number">5</span>] = <span class="number">0</span>;</span><br><span class="line">        Eat(ID);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>

<p>实际上，不用函数的写法也是可行的，而且更为简洁：</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    INT8U ID;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    INT8U j, i;</span><br><span class="line">    INT32U time = <span class="number">0</span>;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    ID = *(INT8U *)pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[ID])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d is applying for meal      "</span>, ID);</span><br><span class="line">                PC_DispStr(x, ID, temp, DISP_FGND_GREEN + DISP_FGND_RED);</span><br><span class="line">                <span class="keyword">if</span>(Stick[ID - <span class="number">1</span>] == <span class="number">1</span> &amp;&amp; Stick[ID % <span class="number">5</span>] == <span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    Stick[ID - <span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">                    Stick[ID % <span class="number">5</span>] = <span class="number">0</span>;</span><br><span class="line">                    j = <span class="number">6</span>;</span><br><span class="line">                    <span class="keyword">for</span>(i = TIME + <span class="number">1</span>; i &lt;= <span class="number">60</span>; i++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d is eating meal: %d    "</span>, ID, <span class="number">60</span> - i);</span><br><span class="line">                        PC_DispStr(x, ID, temp, DISP_FGND_GREEN + DISP_FGND_RED);</span><br><span class="line">                        <span class="keyword">if</span>(i == <span class="number">60</span>)</span><br><span class="line">                        &#123;</span><br><span class="line">                            Stick[ID % <span class="number">5</span>] = <span class="number">1</span>;</span><br><span class="line">                            Stick[ID - <span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(j == <span class="number">4</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d apply for meal failed  "</span>, ID);</span><br><span class="line">                        PC_DispStr(x, ID, temp, DISP_FGND_GREEN + DISP_FGND_RED);</span><br><span class="line">                        OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">300</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d is thinking               "</span>, ID);</span><br><span class="line">            PC_DispStr(x, ID, temp, DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tab-pane" id="tab--2"><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"INCLUDES.H"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TASK_SIZE_STK 512</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TIME 50</span></span><br><span class="line">OS_STK StartTaskStk[TASK_SIZE_STK];</span><br><span class="line">OS_STK PhiTaskStk[<span class="number">5</span>][TASK_SIZE_STK];</span><br><span class="line">OS_STK KeyTaskStk[TASK_SIZE_STK];</span><br><span class="line">INT8U PhiID[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">INT8U x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">INT8U i;</span><br><span class="line">INT16S Key;</span><br><span class="line">BOOLEAN KeyFlag;</span><br><span class="line">INT16S KeyArray[] = &#123;<span class="number">0x1B</span>, <span class="number">0x31</span>, <span class="number">0x32</span>, <span class="number">0x33</span>, <span class="number">0x34</span>, <span class="number">0x35</span>&#125;;</span><br><span class="line">OS_EVENT *Semp[<span class="number">5</span>];  <span class="comment">//声明5个信号量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Eat</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Think</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fail</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reply</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    OSInit();</span><br><span class="line">    PC_DOSSaveReturn();</span><br><span class="line">    PC_VectSet(uCOS, OSCtxSw);</span><br><span class="line">    OSTaskCreate(StartTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;StartTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">0</span>);</span><br><span class="line">    OSTaskCreate(KeyTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;KeyTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">    OSStart();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    INT8U err;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> OS_CRITICAL_METHOD == 3</span></span><br><span class="line">    OS_CPU_SR cpu_sr</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    pdata = pdata;</span><br><span class="line">    OS_ENTER_CRITICAL();</span><br><span class="line">    PC_VectSet(<span class="number">0x08</span>, OSTickISR);</span><br><span class="line">    PC_SetTickRate(OS_TICKS_PER_SEC);</span><br><span class="line">    OS_EXIT_CRITICAL();</span><br><span class="line">    OSStatInit();</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        err = OSTaskCreate(PhiTask, (<span class="keyword">void</span> *)&amp;PhiID[i],</span><br><span class="line">                           &amp;PhiTaskStk[i][TASK_SIZE_STK - <span class="number">1</span>], i + <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(err == OS_NO_ERR)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Task %d Creats Successfully"</span>, i);</span><br><span class="line">            PC_DispStr(<span class="number">2</span>, <span class="number">20</span> + i, temp,</span><br><span class="line">                       DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//定义5个信号量,初值为1</span></span><br><span class="line">        Semp[i] = OSSemCreate(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(Semp[i] != (OS_EVENT *)<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Semphore %d Creates Successfully"</span>, i);</span><br><span class="line">            PC_DispStr(<span class="number">40</span>, <span class="number">20</span> + i, temp,</span><br><span class="line">                       DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    OSTaskSuspend(OS_PRIO_SELF);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        KeyFlag = PC_GetKey(&amp;Key);</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            PC_DOSReturn();</span><br><span class="line">        &#125;</span><br><span class="line">        OSTimeDly(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    INT8U err1, err2;</span><br><span class="line">    INT32U  time;</span><br><span class="line">    INT8U ID;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    ID = *(INT8U *)pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[ID])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//调用函数如果在函数中不用循环，函数的内容会非常快执行</span></span><br><span class="line">            <span class="comment">//由于函数和任务不同,函数只在满足跳转条件时执行一次</span></span><br><span class="line">            <span class="comment">//而任务会不断通过调度跳转执行</span></span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is applying for meal "</span>, ID);</span><br><span class="line">            PC_DispStr(x, ID, temp, DISP_BGND_BLACK + DISP_FGND_RED);</span><br><span class="line">            <span class="comment">//如果不使用time,申请的时间会变长？</span></span><br><span class="line">            time = OSTimeGet();</span><br><span class="line">            <span class="comment">//先申请左边的信号量</span></span><br><span class="line">            OSSemPend(Semp[ID - <span class="number">1</span>], <span class="number">1000</span>, &amp;err1);</span><br><span class="line">            time = OSTimeGet() - time;</span><br><span class="line">            <span class="comment">//如果下面直接将等待时间设置为1000,那么相当于两次</span></span><br><span class="line">            <span class="comment">//申请一共花了2000个时钟周期,而用1001减去两次的</span></span><br><span class="line">            <span class="comment">//时间差意味着一共等待1000左右个时钟周期</span></span><br><span class="line">            OSSemPend(Semp[ID % <span class="number">5</span>], <span class="number">1001</span> - time, &amp;err2);</span><br><span class="line">            <span class="keyword">if</span>(err1 == OS_NO_ERR &amp;&amp; err2 == OS_NO_ERR)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//都申请成功,直接跳转到Eat函数</span></span><br><span class="line">                Eat(ID);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err1 == OS_NO_ERR &amp;&amp; err2 == OS_TIMEOUT)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//只有一个申请成功了,则释放掉,显示申请失败</span></span><br><span class="line">                OSSemPost(Semp[ID - <span class="number">1</span>]);</span><br><span class="line">                Fail(ID);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err1 == OS_TIMEOUT &amp;&amp; err2 == OS_NO_ERR)</span><br><span class="line">            &#123;</span><br><span class="line">                OSSemPost(Semp[ID % <span class="number">5</span>]);</span><br><span class="line">                Fail(ID);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Think(ID);</span><br><span class="line">            &#125;</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Think(ID);</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Eat</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    INT8U j;</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is eating               "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">    <span class="keyword">for</span>(j = TIME; j &lt; <span class="number">60</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j &lt;= <span class="number">59</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"last time: %d      "</span>, <span class="number">60</span> - j);</span><br><span class="line">            PC_DispStr(<span class="number">24</span>, ID, temp,</span><br><span class="line">                       DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">            OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">59</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            OSSemPost(Semp[ID - <span class="number">1</span>]);</span><br><span class="line">            OSSemPost(Semp[ID % <span class="number">5</span>]);</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Think</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is thinking                     "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fail</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d reply for meal failed           "</span>, ID);</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        PC_DispStr(x, ID, temp,</span><br><span class="line">                   DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reply</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is thinking                     "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 不用函数的写法*/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"INCLUDES.H"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TASK_SIZE_STK 512</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TIME 50</span></span><br><span class="line">OS_STK StartTaskStk[TASK_SIZE_STK];</span><br><span class="line">OS_STK PhiTaskStk[<span class="number">5</span>][TASK_SIZE_STK];</span><br><span class="line">OS_STK KeyTaskStk[TASK_SIZE_STK];</span><br><span class="line">INT8U PhiID[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">INT8U x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">INT8U i;</span><br><span class="line">INT16S Key;</span><br><span class="line">BOOLEAN KeyFlag;</span><br><span class="line">INT16S KeyArray[] = &#123;<span class="number">0x1B</span>, <span class="number">0x31</span>, <span class="number">0x32</span>, <span class="number">0x33</span>, <span class="number">0x34</span>, <span class="number">0x35</span>&#125;;</span><br><span class="line">OS_EVENT *Semp[<span class="number">5</span>];  <span class="comment">//声明5个信号量</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    OSInit();</span><br><span class="line">    PC_DOSSaveReturn();</span><br><span class="line">    PC_VectSet(uCOS, OSCtxSw);</span><br><span class="line">    OSTaskCreate(StartTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;StartTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">0</span>);</span><br><span class="line">    OSTaskCreate(KeyTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;KeyTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">    OSStart();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    INT8U err;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> OS_CRITICAL_METHOD == 3</span></span><br><span class="line">    OS_CPU_SR cpu_sr</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    pdata = pdata;</span><br><span class="line">    OS_ENTER_CRITICAL();</span><br><span class="line">    PC_VectSet(<span class="number">0x08</span>, OSTickISR);</span><br><span class="line">    PC_SetTickRate(OS_TICKS_PER_SEC);</span><br><span class="line">    OS_EXIT_CRITICAL();</span><br><span class="line">    OSStatInit();</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        err = OSTaskCreate(PhiTask, (<span class="keyword">void</span> *)&amp;PhiID[i],</span><br><span class="line">                           &amp;PhiTaskStk[i][TASK_SIZE_STK - <span class="number">1</span>], i + <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(err == OS_NO_ERR)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Task %d Creats Successfully"</span>, i);</span><br><span class="line">            PC_DispStr(<span class="number">2</span>, <span class="number">20</span> + i, temp,</span><br><span class="line">                       DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//定义5个信号量,初值为1</span></span><br><span class="line">        Semp[i] = OSSemCreate(<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span>(Semp[i] != (OS_EVENT *)<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Semphore %d Creates Successfully"</span>, i);</span><br><span class="line">            PC_DispStr(<span class="number">40</span>, <span class="number">20</span> + i, temp,</span><br><span class="line">                       DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    OSTaskSuspend(OS_PRIO_SELF);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        KeyFlag = PC_GetKey(&amp;Key);</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            PC_DOSReturn();</span><br><span class="line">        &#125;</span><br><span class="line">        OSTimeDly(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    INT8U err1, err2;</span><br><span class="line">    INT32U  time;</span><br><span class="line">    INT8U ID, i, j;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    ID = *(INT8U *)pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[ID])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d is applying for meal    "</span>, ID);</span><br><span class="line">            PC_DispStr(x, ID, temp,  DISP_FGND_RED + DISP_BGND_GREEN);</span><br><span class="line">            time = OSTimeGet();</span><br><span class="line">            OSSemPend(Semp[ID - <span class="number">1</span>], <span class="number">1000</span>, &amp;err1);</span><br><span class="line">            time = OSTimeGet() - time;</span><br><span class="line">            OSSemPend(Semp[ID % <span class="number">5</span>], <span class="number">1001</span> - time, &amp;err2);</span><br><span class="line">            <span class="keyword">if</span>(err1 == OS_NO_ERR &amp;&amp; err2 == OS_NO_ERR)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(i = TIME + <span class="number">1</span>; i &lt;= <span class="number">60</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d is eating meal : %d     "</span>, ID, <span class="number">60</span> - i);</span><br><span class="line">                    PC_DispStr(x, ID, temp, DISP_BGND_GREEN + DISP_FGND_RED);</span><br><span class="line">                    OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">if</span>(i == <span class="number">60</span>)</span><br><span class="line">                    &#123;</span><br><span class="line">                        OSSemPost(Semp[ID - <span class="number">1</span>]);</span><br><span class="line">                        OSSemPost(Semp[ID % <span class="number">5</span>]);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err1 == OS_TIMEOUT &amp;&amp; err2 == OS_NO_ERR)</span><br><span class="line">            &#123;</span><br><span class="line">                OSSemPost(Semp[ID % <span class="number">5</span>]);</span><br><span class="line">                <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d apply for meal failed"</span>, ID);</span><br><span class="line">                    PC_DispStr(x, ID, temp, DISP_FGND_RED + DISP_BGND_GREEN);</span><br><span class="line">                    OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err2 == OS_TIMEOUT &amp;&amp; err1 == OS_NO_ERR)</span><br><span class="line">            &#123;</span><br><span class="line">                OSSemPost(Semp[ID - <span class="number">1</span>]);</span><br><span class="line">                <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d apply for meal failed"</span>, ID);</span><br><span class="line">                    PC_DispStr(x, ID, temp, DISP_FGND_RED + DISP_BGND_GREEN);</span><br><span class="line">                    OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(err1 == OS_TIMEOUT &amp;&amp; err2 == OS_TIMEOUT)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d apply for meal failed"</span>, ID);</span><br><span class="line">                    PC_DispStr(x, ID, temp, DISP_FGND_RED + DISP_BGND_GREEN);</span><br><span class="line">                    OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">500</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Phi %d is thinking                 "</span>, ID);</span><br><span class="line">            PC_DispStr(x, ID, temp, DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div><div class="tab-pane" id="tab--3"><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"INCLUDES.H"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TASK_SIZE_STK 512</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TIME 50</span></span><br><span class="line">OS_STK StartTaskStk[TASK_SIZE_STK];</span><br><span class="line">OS_STK PhiTaskStk[<span class="number">5</span>][TASK_SIZE_STK];</span><br><span class="line">OS_STK KeyTaskStk[TASK_SIZE_STK];</span><br><span class="line">INT8U PhiID[] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line">INT8U x = <span class="number">0</span>, y = <span class="number">0</span>;</span><br><span class="line">INT8U i;</span><br><span class="line">INT16S Key;</span><br><span class="line">BOOLEAN KeyFlag;</span><br><span class="line">INT16S KeyArray[] = &#123;<span class="number">0x1B</span>, <span class="number">0x31</span>, <span class="number">0x32</span>, <span class="number">0x33</span>, <span class="number">0x34</span>, <span class="number">0x35</span>&#125;;</span><br><span class="line"><span class="comment">//声明信号量集,只需要1个即可</span></span><br><span class="line">OS_FLAG_GRP *Semp_F;</span><br><span class="line"><span class="comment">//01234, 01234, 01234, 01234, 01234  对应的位</span></span><br><span class="line"><span class="comment">//00011, 00110, 01100, 11000, 10001  每位的状态</span></span><br><span class="line"><span class="comment">//  3  ,   6  ,  12  ,  24  ,   17   对应10进制</span></span><br><span class="line"><span class="comment">//  1  ,   2  ,   3  ,   4  ,   5    哲学家编号</span></span><br><span class="line"><span class="comment">//由于ID从1开始,数组下标从0开始,所以前面填充数字0</span></span><br><span class="line">INT8U Flag_Location[] = &#123;<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">12</span>, <span class="number">24</span>, <span class="number">17</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Eat</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Think</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fail</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reply</span><span class="params">(INT8U ID)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    OSInit();</span><br><span class="line">    PC_DOSSaveReturn();</span><br><span class="line">    PC_VectSet(uCOS, OSCtxSw);</span><br><span class="line">    OSTaskCreate(StartTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;StartTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">0</span>);</span><br><span class="line">    OSTaskCreate(KeyTask, (<span class="keyword">void</span> *)<span class="number">0</span>,</span><br><span class="line">                 &amp;KeyTaskStk[TASK_SIZE_STK - <span class="number">1</span>], <span class="number">1</span>);</span><br><span class="line">    OSStart();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">StartTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    INT8U err;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> OS_CRITICAL_METHOD == 3</span></span><br><span class="line">    OS_CPU_SR cpu_sr</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    pdata = pdata;</span><br><span class="line">    OS_ENTER_CRITICAL();</span><br><span class="line">    PC_VectSet(<span class="number">0x08</span>, OSTickISR);</span><br><span class="line">    PC_SetTickRate(OS_TICKS_PER_SEC);</span><br><span class="line">    OS_EXIT_CRITICAL();</span><br><span class="line">    OSStatInit();</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        err = OSTaskCreate(PhiTask, (<span class="keyword">void</span> *)&amp;PhiID[i],</span><br><span class="line">                           &amp;PhiTaskStk[i][TASK_SIZE_STK - <span class="number">1</span>], i + <span class="number">2</span>);</span><br><span class="line">        <span class="keyword">if</span>(err == OS_NO_ERR)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Task %d Creats Successfully"</span>, i);</span><br><span class="line">            PC_DispStr(<span class="number">2</span>, <span class="number">20</span> + i, temp,</span><br><span class="line">                       DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//至少要5位,这里取8位,全设置为1,创建信号量集</span></span><br><span class="line">    Semp_F = OSFlagCreate(<span class="number">255</span>, &amp;err);</span><br><span class="line">    <span class="keyword">if</span>(err == OS_NO_ERR)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">sprintf</span>(temp, <span class="string">"OS_FLAG Creats Successfully"</span>);</span><br><span class="line">        PC_DispStr(<span class="number">40</span>, <span class="number">20</span>, temp,</span><br><span class="line">                   DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">    &#125;</span><br><span class="line">    OSTaskSuspend(OS_PRIO_SELF);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">KeyTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        KeyFlag = PC_GetKey(&amp;Key);</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[<span class="number">0</span>])</span><br><span class="line">        &#123;</span><br><span class="line">            PC_DOSReturn();</span><br><span class="line">        &#125;</span><br><span class="line">        OSTimeDly(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PhiTask</span><span class="params">(<span class="keyword">void</span> *pdata)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    INT8U errPhi;</span><br><span class="line">    INT8U ID;</span><br><span class="line">    pdata = pdata;</span><br><span class="line">    ID = *(INT8U *)pdata;</span><br><span class="line">    <span class="keyword">for</span>(;;)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(Key == KeyArray[ID])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is applying for meal "</span>, ID);</span><br><span class="line">            PC_DispStr(x, ID, temp, DISP_BGND_BLACK + DISP_FGND_RED);</span><br><span class="line">            <span class="comment">//请求信号量集, 需要将INT8U转换称为OS_FLAG类型</span></span><br><span class="line">            <span class="comment">//OS_FLAG_CONSUME是必要的,加上之后在请求信号量集</span></span><br><span class="line">            <span class="comment">//后会消耗掉信号量集,防止其它任务占用</span></span><br><span class="line">            OSFlagPend(Semp_F,</span><br><span class="line">                       (OS_FLAGS)Flag_Location[ID],</span><br><span class="line">                       OS_FLAG_WAIT_SET_ALL + OS_FLAG_CONSUME,</span><br><span class="line">                       <span class="number">1000</span>, &amp;errPhi</span><br><span class="line">                      );</span><br><span class="line">            <span class="keyword">if</span>(errPhi == OS_NO_ERR)</span><br><span class="line">            &#123;</span><br><span class="line">                Eat(ID);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Fail(ID);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            Think(ID);</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Eat</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    INT8U j;</span><br><span class="line">    INT8U err;</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is eating                    "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">    <span class="keyword">for</span>(j = TIME; j &lt; <span class="number">60</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(j &lt;= <span class="number">59</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">sprintf</span>(temp, <span class="string">"last time: %d      "</span>, <span class="number">60</span> - j);</span><br><span class="line">            PC_DispStr(<span class="number">24</span>, ID, temp,</span><br><span class="line">                       DISP_FGND_WHITE + DISP_BGND_BLACK);</span><br><span class="line">            OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(j == <span class="number">59</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            OSFlagPost(Semp_F, (OS_FLAGS)Flag_Location[ID], OS_FLAG_SET, &amp;err);</span><br><span class="line">            OSTimeDly(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Think</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is thinking                     "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Fail</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d reply for meal failed           "</span>, ID);</span><br><span class="line">    <span class="keyword">for</span>(i = <span class="number">0</span>; i &lt; <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        PC_DispStr(x, ID, temp,</span><br><span class="line">                   DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">        OSTimeDlyHMSM(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">400</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reply</span><span class="params">(INT8U ID)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> temp[<span class="number">50</span>];</span><br><span class="line">    <span class="built_in">sprintf</span>(temp, <span class="string">"Philos %d is thinking                     "</span>, ID);</span><br><span class="line">    PC_DispStr(x, ID, temp,</span><br><span class="line">               DISP_BGND_BLACK + DISP_FGND_WHITE);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div></div></div></div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/01/%E8%A7%86%E9%A2%91%E5%8E%8B%E7%BC%A9%E6%8A%80%E6%9C%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/04/01/%E8%A7%86%E9%A2%91%E5%8E%8B%E7%BC%A9%E6%8A%80%E6%9C%AF/" class="post-title-link" itemprop="url">视频压缩技术</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-04-01 10:08:22" itemprop="dateCreated datePublished" datetime="2020-04-01T10:08:22+08:00">2020-04-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-13 10:39:20" itemprop="dateModified" datetime="2020-04-13T10:39:20+08:00">2020-04-13</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%94%B5%E8%A7%86%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">电视技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="视频压缩技术"><a href="#视频压缩技术" class="headerlink" title="视频压缩技术"></a>视频压缩技术</h5><h6 id="可能性"><a href="#可能性" class="headerlink" title="可能性"></a><strong>可能性</strong></h6><ul>
<li>空间冗余：水平、垂直方向相邻像素变化很小，存在极强的空间相关性。又叫<span style="color:red">帧内相关性</span>。</li>
<li>时间冗余：相邻场或帧的对应像素之间，亮度和色度信息存在极强的相关性。又叫<span style="color:red">帧间相关性</span>。</li>
<li>结构冗余</li>
<li>知识冗余</li>
<li>视觉冗余：人眼具有视觉非均匀特性，对视觉不敏感的信息可适当舍弃。</li>
</ul>
<h6 id="熵编码"><a href="#熵编码" class="headerlink" title="熵编码"></a><strong>熵编码</strong></h6><p><span style="color:blue">&diams;&ensp;</span><strong>Huffman</strong>编码</p>
<p><img src="https://i.loli.net/2020/04/01/N3vgPtEGinHCs1D.png" alt="Huffman"></p>
<p>&ensp; &emsp;&nbsp;<span style="color:blue">&bull;&ensp;</span> 从右至左依次顺着箭头的逆方向得到不同电平的编码。</p>
<p><span style="color:blue">&diams;&ensp;</span>算术编码：整条信息公用一个代码，效率高。</p>
<p><span style="color:blue">&diams;&ensp;</span>游程编码：将<span style="color:red">连续出现的字符</span>用单一的记号来表示。<span style="color:green">编码、解码速度快</span>。</p>
<h6 id="预测编码和变换编码"><a href="#预测编码和变换编码" class="headerlink" title="预测编码和变换编码"></a><strong>预测编码和变换编码</strong></h6><p><span style="color:blue">&diams;&ensp;</span>DPCM原理</p>
<ul>
<li><p>基于<span style="color:red">图像的统计特性</span>进行数据压缩的基本方法即预测编码。它利用了图像信号的<span style="color:green">空间或时间</span>相关性，编码的是<span style="color:red">预测误差</span>。</p>
</li>
<li><p>利用帧内相关性的DPCM被称为帧内预测编码，利用帧间相关性则为帧间预测编码。 <span style="color:green">帧间的效率更高</span>。</p>
</li>
<li><p>编码性能取决于<span style="color:red">预测器的设计</span>。</p>
</li>
</ul>
<p><span style="color:blue">&diams;&ensp;</span>变换编码原理</p>
<ul>
<li><p>将空间域描述的图像经过某种变换在变换域中描述，便于使用<span style="color:green">Z字形扫描、自适应量化、变长编码</span>等进一步处理。</p>
</li>
<li><p>常采用<span style="color:red">二维正交变换</span>的方式，但整幅图作为二维矩阵计算量太大，因此分成8<span>&times;</span>8或者16<span>&times;</span>16的的小方块。</p>
</li>
</ul>
<p><span style="color:blue">&diams;&ensp;</span>离散余弦变换</p>
<ul>
<li><p>DCT矩阵与图像内容无关，由于构成<span style="color:green">对称的数据序列</span>，因而避免了<span style="color:red">子图像轮廓处的跳跃和不连续</span>。</p>
</li>
<li><p>DCT系数矩阵的能量集中在反映水平和垂直<span style="color:green">低频分量</span>的<span style="color:red">左上角</span>。</p>
</li>
</ul>
<h6 id="静止图像压缩标准"><a href="#静止图像压缩标准" class="headerlink" title="静止图像压缩标准"></a>静止图像压缩标准</h6><p><span style="color:blue">&diams;&ensp;</span>要求</p>
<ul>
<li>清晰度：要求更高的清晰度。</li>
<li>逐渐浮现的显示方式：先传模糊的整幅图像，再逐渐变清晰。</li>
<li>抗干扰：要求编码与调制方式都有较强抗干扰能力。</li>
</ul>
<p><span style="color:blue">&diams;&ensp;</span><strong>JPEG</strong>标准</p>
<p><img src="https://i.loli.net/2020/04/01/TIOkVEDKnCGh2zx.png" alt="JPEG标准"></p>
<ul>
<li><p>彩色坐标转换：去除数据冗余量。</p>
</li>
<li><p>DCT：采用8<span>&times;</span>8子块的DCT。(0, 0)元素是块的平均值。</p>
</li>
<li><p>量化：丢弃对视觉效果影响不大的信息，是多对一映射，<u>是造成DCT编码信息损失的根源</u>。<span style="color:red">左上角量化间隔小右下角大</span>。</p>
</li>
</ul>
<p><span style="color:blue">&diams;&ensp;</span>JPEG2000标准</p>
<ul>
<li>采用了<span style="color:green">小波变换</span>：没有压缩数据，使图像的能量分布发生了变换。</li>
<li>支持有损和无损压缩。</li>
<li>支持ROI处理。</li>
<li>可随机获取部分压缩码流。</li>
<li>可随机存取图像某个区域。</li>
<li>抗误码性能得到提高。</li>
<li>具有视觉频率加权。</li>
</ul>
<h6 id="活动图像压缩标准"><a href="#活动图像压缩标准" class="headerlink" title="活动图像压缩标准"></a>活动图像压缩标准</h6><p>&ensp; &emsp;&nbsp;活动图像即<strong>电视信号</strong>。其编码要求：<strong>实时和高效</strong>。</p>
<p><span style="color:blue">&diams;&ensp;</span>帧间预测编码</p>
<ul>
<li><p><strong>三种区域</strong></p>
<ul>
<li><p>背景区：相邻帧的背景很相似，帧间相关性很强。</p>
</li>
<li><p>运动物体区：将物理运动看作平移则相邻帧的数据也基本相同。</p>
</li>
<li><p>暴露区：物体运动后所暴露出的曾被物体遮住的区域。</p>
</li>
</ul>
</li>
<li><p><strong>五种编码</strong></p>
<ul>
<li>空间分辨率和时间分辨率交换：降低运动物体的分辨率，且速度越快，分辨率可以越低。</li>
<li>帧内、帧间自适应编码：变化缓慢的帧间相关性强，运动增大时应采用帧内编码。</li>
<li>运动补偿预测编码：估计出物体在相邻帧内的相对位移，用上一帧预测下一帧，传输预测的差值部分。<ul>
<li>物体的划分：静止和运动。</li>
<li>运动估计：估计每个运动物体的位移。</li>
<li>运动补偿：由位移的估值建立同一运动物体在不同帧的空间位置对应关系。</li>
<li>补偿后的预测信息编码：对补偿后的位移帧差信号以及运动矢量进行编码传输。</li>
</ul>
</li>
<li>块匹配运动补偿预测：将图像分成互不重叠的N&times;N个像素的子块，单独预测。<ul>
<li>全搜索算法。N小则准确度高，计算量大。</li>
<li>三步搜索算法。搜索范围$\pm$8。</li>
</ul>
</li>
<li>混合编码：变化和预测组合在一起。<ul>
<li>DCT：空间冗余度压缩。</li>
<li>帧间预测或运动补偿：时间冗余度压缩。</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span style="color:blue">&diams;&ensp;</span>MPEG-1</p>
<ul>
<li>图像格式SIF<ul>
<li>只处理逐行扫描的图像。</li>
<li>输入的视频信号必须是数字化的一个亮度信号和两个色差信号（$Y,C_B,C_R$）。</li>
</ul>
</li>
<li>视频结构<ul>
<li>视频序列：大致对应于一个镜头。</li>
<li>图像组：将一个图像序列中连续的几个图像组成一个小组。</li>
<li>图像：图像编码的基本单元。<ul>
<li>I帧：只用本帧的信息进行编码。</li>
<li>P帧：由一个过去的I帧或P帧采用有运动补偿的帧间预测进行更有效的编码。</li>
<li>B帧：提供最高的压缩，双向预测。</li>
</ul>
</li>
<li>像条：发生误码且不可纠正时，数据重新获得同步，从而正常解码。</li>
<li>宏块：运动预测的基本单元：一个宏块由一个16&times;16像素的 <strong>亮度阵列</strong>和同区域内的$C_B$，$C_R$色差阵列共同组成。<ul>
<li>MPEG-1图像色度格式为4：2：0。</li>
<li>MPEG-2还包括4：2：2和4：4：4，因此一个宏块又由许多8&times;8的块组成。</li>
<li>4：2：0的宏块由6个块组成：4个亮度块和2个色度块。</li>
<li>4：2：2的宏块由8个块组成：4个亮度块，2个$C_B$块，两个$C_R$块。</li>
<li>4：4：4的宏块由12个块组成：4个亮度块，4个$C_B$块，4个$C_R$块。</li>
</ul>
</li>
<li>块：DCT变换的基本单元。</li>
</ul>
</li>
<li>固定数码率和可变数码率</li>
<li>算法概述<ul>
<li>对DC分量采用特定的量化步长并进行预测编码</li>
<li>对AC分量进行Z字形扫描和二维VLC编码。</li>
</ul>
</li>
<li>编码：视频序列的编码顺序与显示顺序是不同的。</li>
<li>缓存控制器<ul>
<li>反馈控制法。</li>
<li>跳B帧处理法。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/16/%E5%BD%A9%E8%89%B2%E7%94%B5%E8%A7%86%E4%BF%A1%E5%8F%B7%E7%9A%84%E4%BC%A0%E8%BE%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/16/%E5%BD%A9%E8%89%B2%E7%94%B5%E8%A7%86%E4%BF%A1%E5%8F%B7%E7%9A%84%E4%BC%A0%E8%BE%93/" class="post-title-link" itemprop="url">彩色电视信号的传输</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-16 11:38:22" itemprop="dateCreated datePublished" datetime="2020-03-16T11:38:22+08:00">2020-03-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-03 16:35:27" itemprop="dateModified" datetime="2020-04-03T16:35:27+08:00">2020-04-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%94%B5%E8%A7%86%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">电视技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="兼容问题"><a href="#兼容问题" class="headerlink" title="兼容问题"></a>兼容问题</h4><p><strong>需要满足的条件：</strong></p>
<ul>
<li>在彩色电视的图像信号中，要有<span style="color:red">代表图像亮度</span>的<span style="color:green">亮度信号</span>和<span style="color:red">代表图像色彩</span>的<span style="color:green">色度信号</span>。</li>
<li>应与黑白电视有<span style="color:red">相同</span>的视频带宽和射频带宽、图像载频和伴音载频、行频和场频。</li>
</ul>
<p><strong>信号选取</strong></p>
<ul>
<li><p>用一个编码矩阵电路根据亮度公式$(Y=0.3R+0.59G+0.11B)$编出一个<span style="color:red">亮度信号</span>和$R-Y$、$B-Y$ 两个<span style="color:red">色差信号</span>。</p>
</li>
<li><p><strong>优点：</strong></p>
</li>
</ul>
<p>&ensp; &emsp;&nbsp;<span style="color:blue">&bull;&ensp;</span>可减少色度信号对亮度信号的干扰（传送黑白图像时色差信号为0）。</p>
<p>&ensp; &emsp;&nbsp;<span style="color:blue">&bull;&ensp;</span>能够实现<span style="color:red">亮度恒定原理</span>。</p>
<p>&ensp; &emsp;&nbsp;<span style="color:blue">&bull;&ensp;</span>可节省色度信号的发射能量。</p>
<p><strong>频带压缩</strong> </p>
<p>&ensp; &emsp;&nbsp;人眼对色彩细节的分辨力差，传送时只要传送一副<span style="color:red">粗线条大面积</span>的<span style="color:green">色彩图像</span>配上<span style="color:green">亮度细节</span>就可以了，称为大面积着色原理。</p>
<p><strong>频谱交错</strong>   </p>
<table>
  <tr>
    <td style="background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei" ">
        <ul>
            <li>亮度信号和两个色差信号都在一个通道内传送(0~6MHz)</li>
            <li>先选择一个频率，称<span style="color:red">彩色副载波</span>，用两个<span style="color:green">色差信号</span>对彩色副载波进行调制，调制后的信号称<span style="color:blue">色度信号</span>。</li>
            <li>将得到的色度信号与亮度信号、同步信号叠加为彩色全电视信号，再去调制<span style="color:red">图像载波</span>，称为<span style="color:green">二次调制</span>。</li>
             <li>将色度信号的频谱插在亮度信号的频谱空隙中间，再用$6MHz$带宽的通道同时传送<span style="color:red">亮度信号</span>和<span style="color:red">色度</span>信号，这种方法即频谱交错。</li>
        </ul>
    </td>
  </tr>
</table>

<h4 id="NTSC-制"><a href="#NTSC-制" class="headerlink" title="$NTSC$制"></a>$NTSC$制</h4><p><strong>正交平衡调幅</strong>：平衡调幅又称<span style="color:red">抑制载波调幅</span>。</p>
<p><strong>作用</strong>： </p>
<ul>
<li>抑制色度信号对亮度信号的干扰。</li>
<li>节省发射功率。</li>
</ul>
<p><strong>特点：</strong> </p>
<table>
  <tr>
    <td style="background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei" ">
        <ul>
            <li>平衡调幅波不含载波分量。</li>
            <li>其极性由调制信号和载波的极性共同决定。</li>
            <li>平衡调幅波的振幅只与调制信号的振幅成正比。当传送图像的色差信号为零时，平衡调幅波的值也为零，可<span style="color:red">节省发射功率</span>，减少色度对亮度信号的干扰。</li>
            <li>不能用包络检波法解调，要用同步检波法。</li>
            <li>色度信号的<span style="color:red">振幅</span>和<span style="color:red">相角</span>之中包含彩色图像的全部色度信息。</li>
            <li>振幅F<sub>m</sub>取决于<span style="color:red">色差信号的幅值</span>，决定了所传送色彩的<span style="color:red">饱和度</span>。</li>
            <li>相角<span>&phi;</span>取决于<span style="color:red">色差信号的相对比值</span>，决定了色彩的<span style="color:red">色调</span>。</li>
        </ul>
    </td>
  </tr>
</table>

<p><strong>彩条信号及色度信号</strong></p>
<ul>
<li>标准彩条信号是一种彩色电视中常用的<span style="color:green">测试信号</span>，用来对彩色电视系统进行测试与调整。</li>
<li>标准彩条信号由<span style="color:green">三基色</span>及其<span style="color:green">补色</span>加上<span style="color:green">黑</span>与<span style="color:green">白</span>共八种颜色<span style="color:red">等宽</span>竖条组成。</li>
</ul>
<p><strong>色度信号与幅度压缩</strong></p>
<ul>
<li>标准彩条信号电平范围大大超过了黑白电视的范围，所以要将两个色差信号分布乘上一个系数进行压缩后再传送。</li>
<li>压缩后色差信号$R-Y$用$V$表示，$B-Y$用$U$表示。</li>
</ul>
<p><strong>副载波的半行频间置</strong></p>
<ul>
<li><p>亮度信号和色度信号在同一个频带内传送容易产生<span style="color:red">相互串扰</span>，精确选择副载波频率可以<span style="color:green">减少相互串扰现象</span>。</p>
</li>
<li><p>亮度信号在$（n-\frac12）f_H$附近有较大空隙，因此副载波频率选择为半行频的倍数，称<span style="color:red">半行频间置</span>。</p>
</li>
<li><p>此外，还需考虑：</p>
<p>  &ensp; &emsp;&nbsp;<span style="color:blue">&bull;&ensp;</span>选择在视频频带的高端，因为亮度信号高频能量少，相对空隙多。</p>
<p>  &ensp; &emsp;&nbsp;<span style="color:blue">&bull;&ensp;</span>上边带不应超过视频信号的$6MHz$。</p>
</li>
</ul>
<p><strong>色同步信号</strong>&ensp; </p>
<p>&emsp;&nbsp;由于要用同步检波，为保证恢复的副载波与发送端被抑制掉的副载波同频、同相，要由发射台发送色同步信号作为基准。</p>
<h4 id="PAL-制"><a href="#PAL-制" class="headerlink" title="$PAL$制"></a>$PAL$制</h4><p>$I、Q$<strong>信号</strong></p>
<ul>
<li>每帧$525$行的制式，亮度、色度信号的<span style="color:red">频带重叠过宽</span>，干扰严重，因此要进一步压缩色度信号的频带。</li>
<li>人眼分辨<span style="color:red">红</span>、<span style="color:green">黄</span>之间颜色变化的能力最强，而分辨<span style="color:red">蓝</span>、<span style="color:green">紫</span>之间颜色变化的能力最弱。</li>
</ul>
<p><strong>相位失真的互补</strong></p>
<ul>
<li>$PAL$制中将色度信号的$F_v$分量逐行倒相，可以使相邻两行的相位失真互补，减少色调畸变。</li>
<li>由于人眼对<span style="color:red">饱和度的改变不敏感</span>，因此察觉不到退饱和度效应。</li>
</ul>
<p><strong>副载波频率的选择</strong></p>
<p>&ensp; &emsp;&nbsp;因为主谱线$U$和$V$相互错开$f_H/2$，所以为了减小干扰，亮度信号的谱线最好是插在$U$、$V$谱线的正中间，即副载频应采用<span style="color:red">四分之一行频间置</span>。</p>
<p><strong>色同步信号</strong></p>
<p>$PAL$制的色同步信号有两个功能：</p>
<ul>
<li><p>提供基准频率和相位。</p>
</li>
<li><p>提供一个极性切换信息。</p>
  <div class="note default"><p>与NTSC最大的不同：$PAL$制色同步信号中副载波是<span style="color:red">逐行倒相</span>的。</p></div>

</li>
</ul>
<p>$PAL$<strong>编码器和解码器</strong></p>
<p><strong>编码流程：</strong></p>
<table>
  <tr>
    <td style="background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei" ">
<ul>
<li>三基色通过矩阵电路产生亮度信号Y和色差信号U和V。</li>
<li>U、V信号通过低通滤波器滤除高频信号来<span style="color:red">压缩色差信号带宽</span>，然后混入不同极性的K脉冲来产生色同步信号。</li>
<li>送入U和V平衡调幅器进行平衡调幅。</li>
<li>将Y信号通过中心频率为f<sub>sc</sub>、带宽为400kHz的-6dB陷波器，并混入复合同步和复合消隐信号。</li>
<li>将亮度信号延时0.6<span>&mu;</span>s,使亮度信号和色度信号在时间上一致。</li>                               
</ul>
     </td>
  </tr>
</table>

<p><strong>解码流程：</strong></p>
<table>
  <tr>
    <td style="background-color:#F0F0F0;color:gray;font-family:Microsoft YaHei" ">
      <ul>
        <li>亮度信号和色度信号的分离。</li>
        <li>色同步信号和色度信号的分离。</li>
        <li>色度信号的两个分量F<sub>U</sub>、F<sub>V</sub>的分离</li>
        <li>同步检波将F<sub>U</sub>、F<sub>V</sub>分量解调为U、V信号。</li>
        <li>解码矩阵将Y、U、V信号还原为三基色信号。</li> 
       </ul>                                                                        
    </td>
  </tr>
</table>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/14/OSTCB%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A6%82%E5%BF%B5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/14/OSTCB%E4%B8%AD%E7%9A%84%E5%87%A0%E4%B8%AA%E6%A6%82%E5%BF%B5/" class="post-title-link" itemprop="url">OSTCB中的几个概念</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-03-14 19:58:22" itemprop="dateCreated datePublished" datetime="2020-03-14T19:58:22+08:00">2020-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2020-04-07 10:25:19" itemprop="dateModified" datetime="2020-04-07T10:25:19+08:00">2020-04-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url" rel="index"><span itemprop="name">嵌入式实时操作系统</span></a>
                </span>
                  >
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F%E5%AE%9E%E6%97%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/Knowledge/" itemprop="url" rel="index"><span itemprop="name">Knowledge</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="OSTCBX-Y-，-OSTCBBitX-Y-的具体含义"><a href="#OSTCBX-Y-，-OSTCBBitX-Y-的具体含义" class="headerlink" title="$OSTCBX/Y$，$OSTCBBitX/Y$的具体含义"></a>$OSTCBX/Y$，$OSTCBBitX/Y$的具体含义</h4><p>&ensp; &emsp;&nbsp;举个例子，任务优先级$PRIO=30$，写成$8$位二进制为 <code>0001_1110</code>。则$OSRdyGrp=$ <code>1000_1000</code>，$OSRdyTbl\left[3\right]=$ <code>0100_0000</code>。</p>
<p>&ensp; &emsp;&nbsp;设置的编程实现过程：</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ptcb-&gt;OSTCBY = (INT8U)(prio &gt;&gt; <span class="number">3</span>) = <span class="number">3</span>;</span><br><span class="line">ptcb-&gt;OSTCBX = (INT8U)(prio &amp; <span class="number">0x07</span>) = <span class="number">7</span>;</span><br></pre></td></tr></table></figure></div>
<p>&ensp; &emsp;&nbsp;第一行求$OSRdyGrp$，第二行求<code>OSRdyTbl[ptcb-&gt;OSTCBY]</code>即 <code>OSRdyTbl[3]</code></p>
<p>但是按位序号不好设定就绪表和就绪组，转换成：</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ptcb-&gt;OSTCBBitY = (INT8U)(<span class="number">1</span> &lt;&lt; ptcb-&gt;OSTCBY);</span><br><span class="line">ptcb-&gt;OSTCBBitX = (INT8U)(<span class="number">1</span> &lt;&lt; ptcb-&gt;OSTCBX);</span><br></pre></td></tr></table></figure></div>
<p>&ensp; &emsp;&nbsp;上述代码是将$1$向左移位，分别移动  <code>3</code> 位和 <code>7</code>位，变成：</p>
<p><code>ptcb-&gt;OSTCBBitY: 0000_1000</code>和 <code>ptcb-&gt;OSTCBBitX: 0100_0000</code>。</p>
<p>以后如果要使任务就绪，比如 <code>prio=30</code>的任务，只要使用：</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">OSRdyGrp |= ptcb-&gt;OSTCBBitY;</span><br><span class="line">OSRdyTbl[ptcb-&gt;OSTCBY] |= ptcb-&gt;OSTCBBitX;</span><br></pre></td></tr></table></figure></div>
<p>即可实现。</p>
<h5 id="分析-OSTimeDly-中相关代码"><a href="#分析-OSTimeDly-中相关代码" class="headerlink" title="分析$OSTimeDly$中相关代码"></a>分析$OSTimeDly$中相关代码</h5><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">OSTimeDly</span><span class="params">(INT16U ticks)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">if</span> OS_CRITICAL_METHOD == 3</span></span><br><span class="line">    OS_CPU_SR cpu_sr</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line">    <span class="keyword">if</span>(ticks &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        OS_ENTER_CRITICAL();</span><br><span class="line">        <span class="keyword">if</span>((OSRdyTbl[OSTCBCur-&gt;OSTCBY] &amp;= ~OSTCBCur-&gt;OSTCBBitX) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            OSRdyGrp &amp;= ~OSTCBCur-&gt;OSTCBBitY;</span><br><span class="line">        &#125;</span><br><span class="line">        OSTCBCur-&gt;OSTCBDly = ticks;</span><br><span class="line">        OS_EXIT_CRITICAL();</span><br><span class="line">        OS_Sched();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div>
<p>&ensp; &emsp;&nbsp;第9行，<code>OSTCBCur-&gt;OSTCBBitX</code> 即 <code>OSRdyTbl[OSTCBCur-&gt;OSTCBY]</code>具体的值，比如 <code>`OSRdyTbl[3]=0100_0000</code>。</p>
<p>而 <code>~</code>则代表按位取反，因此两者再按位与，如果为 <code>0</code>则代表两者相等，不为 <code>0</code>则不等。相等则意味着这个任务是就绪任务，因此下面第 <code>11</code>行就代表取消任务的就绪状态。</p>
<h4 id="最高优先级就绪任务的查找"><a href="#最高优先级就绪任务的查找" class="headerlink" title="最高优先级就绪任务的查找"></a>最高优先级就绪任务的查找</h4><p>&ensp; &emsp;&nbsp;重点是 <code>OSUnMapTbl[]</code>的理解，这个数组表示的是 <code>一个8bit的数据最低位为1的位置</code>。比如下面两个例子：<code>1000 0000</code> 最低位为<code>1</code>的位置在第<code>7</code>位，那么 <code>OSUnMapTbl[128]=7</code>；<code>1000 0010</code> 最低位为<code>1</code>的位置在第<code>1</code>位，那么 <code>OSUnMapTbl[130]=1</code>。<span class="label default">这样做的道理是优先级别数字越小，优先级越高</span>。</p>
<p>&ensp; &emsp;&nbsp;然后就可以用以下代码来查找：</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="C"><figure class="iseeu highlight /c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y = OSUnMapTbl[OSRdyGrp];</span><br><span class="line">x = OSUnMapTbl[OSRdyTbl[y]];</span><br><span class="line">prio = (y &lt;&lt; <span class="number">3</span>) + x;</span><br></pre></td></tr></table></figure></div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/11/%E9%93%BE%E8%A1%A8%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/11/%E9%93%BE%E8%A1%A8%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/" class="post-title-link" itemprop="url">链表中的注意事项</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-11 22:43:22 / Modified: 23:15:37" itemprop="dateCreated datePublished" datetime="2020-03-11T22:43:22+08:00">2020-03-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%AE%97%E6%B3%95/" itemprop="url" rel="index"><span itemprop="name">算法</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="1-注意判断条件的优先级问题："><a href="#1-注意判断条件的优先级问题：" class="headerlink" title="1.注意判断条件的优先级问题："></a>1.注意判断条件的优先级问题：</h5><p>&ensp; &emsp;&nbsp;<code>while(node.next != null &amp;&amp; node.next.next != null)</code>如果交换两者位置，很可能就会报错，这是因为会先运算 <code>&amp;&amp;</code> 前面的表达式的值。</p>
<h5 id="2"><a href="#2" class="headerlink" title="2."></a>2.</h5>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/11/%E9%BB%91%E7%99%BD%E5%85%A8%E7%94%B5%E8%A7%86%E4%BF%A1%E5%8F%B7%E7%9A%84%E7%BB%84%E6%88%90/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/11/%E9%BB%91%E7%99%BD%E5%85%A8%E7%94%B5%E8%A7%86%E4%BF%A1%E5%8F%B7%E7%9A%84%E7%BB%84%E6%88%90/" class="post-title-link" itemprop="url">黑白全电视信号的组成</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-11 19:38:22 / Modified: 20:01:26" itemprop="dateCreated datePublished" datetime="2020-03-11T19:38:22+08:00">2020-03-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%94%B5%E8%A7%86%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">电视技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="1-图像信号"><a href="#1-图像信号" class="headerlink" title="1.图像信号"></a>1.图像信号</h5><p>&ensp; &emsp;&nbsp;图像信号电压的高低反映了实际景物的<span style="color:red">亮度</span>。</p>
<p>&ensp; &emsp;&nbsp;负极性信号：纯白对应的电平最低，全黑对应的电平最高，即信号电平与图像亮度成反比。</p>
<h5 id="2-消隐信号"><a href="#2-消隐信号" class="headerlink" title="2.消隐信号"></a>2.消隐信号</h5><p>&ensp; &emsp;&nbsp;分为行消隐信号和场消隐信号，行消隐信号宽度为$12{\mu}s$，场消隐信号宽度为$25T_H+12{\mu}s$。合称复合消隐信号。</p>
<h5 id="3-同步信号"><a href="#3-同步信号" class="headerlink" title="3.同步信号"></a>3.同步信号</h5><p>&ensp; &emsp;&nbsp;要接收图形，接收机与摄像机的扫描必须<span style="color:red">同步</span>，即扫描的频率和相位要完全相同。</p>
<p>&ensp; &emsp;&nbsp;摄像机每读出一行图形信号后，送出一个行同步信号，前沿表示上一行结束，下一行开始。脉宽为$4.7{\mu}s$。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/11/%E7%94%B5%E8%A7%86%E5%9B%BE%E5%83%8F%E7%9A%84%E4%BC%A0%E9%80%81%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ReedMark">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/03/11/%E7%94%B5%E8%A7%86%E5%9B%BE%E5%83%8F%E7%9A%84%E4%BC%A0%E9%80%81%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">电视图形的传送原理</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-03-11 10:08:22 / Modified: 19:23:40" itemprop="dateCreated datePublished" datetime="2020-03-11T10:08:22+08:00">2020-03-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%94%B5%E8%A7%86%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index"><span itemprop="name">电视技术</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h5 id="1-像素："><a href="#1-像素：" class="headerlink" title="1.像素："></a>1.像素：</h5><p>&ensp; &emsp;&nbsp;一副空间上连续的黑白图像分解成的许多小单元。</p>
<h5 id="2-顺序传送原理："><a href="#2-顺序传送原理：" class="headerlink" title="2.顺序传送原理："></a>2.顺序传送原理：</h5><p>&ensp; &emsp;&nbsp; 将图像分解为像素后顺序传送。</p>
<h5 id="3-电视广播原理："><a href="#3-电视广播原理：" class="headerlink" title="3.电视广播原理："></a>3.电视广播原理：</h5><p>&ensp; &emsp;&nbsp;发送端用<span style="color:red">摄像器件</span>实现光电转换，接收端用<span style="color:red">显像管</span>实现电光转换。</p>
<h5 id="4-行扫描周期："><a href="#4-行扫描周期：" class="headerlink" title="4.行扫描周期："></a>4.行扫描周期：</h5><p>&ensp; &emsp;&nbsp;电子束在水平方向<span style="color:red">往返</span>一次所需要的时间。</p>
<h5 id="5-行逆程系数和帧逆程系数："><a href="#5-行逆程系数和帧逆程系数：" class="headerlink" title="5.行逆程系数和帧逆程系数："></a>5.行逆程系数和帧逆程系数：</h5><p>&ensp; &emsp;&nbsp;逆程扫描会降低图像质量，可用<span style="color:red"> 消隐脉冲</span>截止扫描电子束，使逆程扫描线消失。</p>
<p>&ensp; &emsp;&nbsp;行逆程系数$\alpha=18\%$</p>
<p>&ensp; &emsp;&nbsp;场逆程系数$\beta=8\%$</p>
<h5 id="6-隔行扫描："><a href="#6-隔行扫描：" class="headerlink" title="6.隔行扫描："></a>6.隔行扫描：</h5><p> &ensp;&nbsp;&emsp;为保证清晰度扫描行数要600左右，为保证不产生闪烁感，帧扫描频率应48$Hz$以上，这会使得频带很宽，设备复杂。隔行扫描可以解决此问题。</p>
<p>&ensp; &emsp;&nbsp;将一帧图像分成两场：第一场扫描奇数行，第二场扫描偶数行。扫完后偶数场扫描线嵌在奇数场的中间。</p>
<p>要求：每帧的扫描行数必须是<span style="color:green"> 奇数</span>。</p>
<h5 id="7-拖尾现象："><a href="#7-拖尾现象：" class="headerlink" title="7.拖尾现象："></a>7.拖尾现象：</h5><p> &ensp; &emsp;&nbsp;帧转移型$CCD$在帧转移期间，全部电荷在<span style="color:red"> 成像区</span>移动，一列中的每一个像素都被这列中后面的其它像素的光线照射过，因此景物中的亮点就会在图像上产生一条<span style="color:red"> 垂直亮带</span>。</p>
<p><span style="color:red">$FIT$(帧行间转移型)</span>拖尾基本上不存在。</p>
<h5 id="8-基本参数"><a href="#8-基本参数" class="headerlink" title="8.基本参数"></a>8.基本参数</h5><h6 id="8-1图像宽高比："><a href="#8-1图像宽高比：" class="headerlink" title="8.1图像宽高比："></a>8.1图像宽高比：</h6><p>&ensp; &emsp;&nbsp;由于人眼的视觉最清楚的范围是垂直视角为<span style="color:red">$15^{\circ}$</span>、水平视角为<span style="color:red">$20^{\circ}$</span>的一个矩形视野，因此电视接受机的屏幕是宽高比为<span style="color:red">$4:3$</span>的矩形。大小用<span style="color:red">对角线长度</span>表示。</p>
<h6 id="8-2场频："><a href="#8-2场频：" class="headerlink" title="8.2场频："></a>8.2场频：</h6><p>&ensp; &emsp;&nbsp;为不引起人眼的闪烁感觉，场频应高于<span style="color:red">$48Hz$</span>。我国的标准为$50Hz$。</p>
<h6 id="8-3行数"><a href="#8-3行数" class="headerlink" title="8.3行数"></a>8.3行数</h6><p>&ensp; &emsp;&nbsp;我国标准为$625$行，场频为$50Hz$，帧频为$25Hz$，则行扫描时间$T_H=40ms/625=64{\mu}s$。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ReedMark</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">41</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ReedMark</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.7.1
  </div>
        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  











<script>
if (document.querySelectorAll('div.pdf').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/pdfobject@2/pdfobject.min.js', () => {
    document.querySelectorAll('div.pdf').forEach(element => {
      PDFObject.embed(element.getAttribute('target'), element, {
        pdfOpenParams: {
          navpanes : 0,
          toolbar  : 0,
          statusbar: 0,
          pagemode : 'thumbs',
          view     : 'FitH'
        },
        PDFJS_URL: '/lib/pdf/web/viewer.html',
        height: element.getAttribute('height') || '500px'
      });
    });
  }, window.PDFObject);
}
</script>




  

  

</body>
</html>
